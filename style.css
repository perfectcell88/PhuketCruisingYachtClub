@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap'); /* ADDED for cleaner nav font & body */
@import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&display=swap'); /* For elegant headings */
@import url('https://fonts.googleapis.com/css2?family=Marcellus+SC&display=swap'); /* For nautical/card titles */
/* Playfair Display is in the HTML import, can be used as fallback or specific cases if needed */

/* Enhanced styles for Phuket Cruising Yacht Club - Elite Marine Theme */

:root {
    --primary-dark-blue: #0A2F51;
    --secondary-accent-blue: #5085A5; /* Slightly desaturated, sophisticated blue */
    --primary-light-text: #E8EFF5; /* Off-white with a hint of cool blue */
    --muted-gold-highlight: #C8B588; /* Refined, less bright gold */
    --original-gold-highlight: #f9d976; /* STRICTLY for loading screen & user-specified preserved elements */
    --subtle-seafoam-accent: #87A9A8;
    --text-shadow-strong: 0 2px 4px rgba(0,0,0,0.6); /* For prominent text */
    --text-shadow-soft: 0 1px 2px rgba(0,0,0,0.5);   /* For general text */

    /* Glassmorphism Defaults */
    --glass-bg-base: rgba(10, 47, 81, 0.35); /* Base for most glass elements */
    --glass-bg-popup: rgba(10, 47, 81, 0.65); /* More opaque for main popups */
    /* --glass-bg-nav: rgba(10, 47, 81, 0.6);   REPLACED with new nav variables */
    --glass-blur-amount: 10px; /* Consistent blur */
    --glass-border-light: rgba(220, 230, 240, 0.15); /* Softer light border */
    --glass-border-gold-accent: rgba(200, 181, 136, 0.25); /* Muted gold accent border */

    --font-body: 'Montserrat', sans-serif;
    --font-heading-main: 'Cormorant Garamond', serif;
    --font-heading-section: 'Cormorant Garamond', serif; /* Consistent with main headings */
    --font-heading-card: 'Marcellus SC', serif;
    --font-nav: 'Montserrat', sans-serif;

    /* Spacing variables - for consistency - can be expanded */
    --space-xs: 0.5rem;   /* 8px */
    --space-sm: 0.75rem;  /* 12px */
    --space-md: 1.25rem;  /* 20px */
    --space-lg: 2rem;     /* 32px */
    --space-xl: 3rem;     /* 48px */

    /* NEW Nav Background & Shadow Variables for Scroll Effect */
    --nav-bg-initial: linear-gradient(to right, rgba(10, 25, 40, 0.7), rgba(15, 35, 55, 0.7));
    --nav-bg-scrolled: linear-gradient(to right, rgba(10, 25, 40, 0.9), rgba(15, 35, 55, 0.9));
    --nav-shadow-initial: 0 2px 12px rgba(0,0,0,0.2);
    --nav-shadow-scrolled: 0 6px 25px rgba(0,0,0,0.3);
}

body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    background: linear-gradient(270deg, #000c1a, #051422, #1a1f36, #0d1321);
    background-size: 800% 800%;
    animation: gradientShift 40s ease infinite;
    font-family: var(--font-body); /* UPDATED default font */
    color: var(--primary-light-text); /* UPDATED default text color */
    user-select: none;
    text-align: center;
    cursor: url('Anchor.cur'), auto;
    font-size: 16px; /* Base font size for rem calculations */
    line-height: 1.6; /* Improved base line-height */
}

#threejs-background {
    position: fixed; top: 0; left: 0;
    width: 100vw; height: 100vh;
    z-index: 1;
}

#page-content {
    position: relative; top: 0; left: 0;
    width: 100%; min-height: 100%;
    z-index: 5; opacity: 0;
    transition: opacity 1.2s ease;
}
#page-content.visible { opacity: 1; }

#main-scrollable-content-wrapper {
    position: relative; min-height: 100vh;
    padding-top: 90px; /* Adjusted for nav height */
    padding-bottom: var(--space-xl);
    box-sizing: border-box; overflow-y: auto; overflow-x: hidden;
    height: 100vh; width: 100%;
}

#main-scrollable-content-wrapper::-webkit-scrollbar { width: 10px; }
#main-scrollable-content-wrapper::-webkit-scrollbar-track { background: rgba(10, 47, 81, 0.2); }
#main-scrollable-content-wrapper::-webkit-scrollbar-thumb {
    background: var(--secondary-accent-blue);
    border-radius: 5px; border: 2px solid transparent;
    background-clip: content-box;
}
#main-scrollable-content-wrapper::-webkit-scrollbar-thumb:hover { background: var(--muted-gold-highlight); }

body.overlay-active {
    overflow: hidden; position: fixed;
    width: 100%; height: 100%; top: 0; left: 0;
}
body.overlay-active .home-content {
    opacity: 0; pointer-events: none; visibility: hidden;
    transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
}

/* Loading Screen - STRICTLY ORIGINAL COLORS + NEW DOTS */
#loading-overlay {
    position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    z-index: 9999; pointer-events: all; background: rgba(0,12,26,0.95); /* Slightly more opaque from original */
    opacity: 1; transition: opacity 1s ease-out; /* Smoother fade */
}
#loading-overlay::before { /* Original Gold Ripple from user's file */
    content: ""; position: absolute; width: 200px; height: 200px;
    background: radial-gradient(circle, rgba(249,217,118,0.1), transparent 70%);
    border-radius: 50%; animation: ripple 2.5s ease-out infinite; pointer-events: none;
}
#loading-logo-circle-wrapper { position: relative; width: 200px; height: 200px; margin-bottom: var(--space-md); }
#loading-logo {
    width: 200px; height: 200px; display: block;
    filter: drop-shadow(0 0 8px var(--original-gold-highlight)); /* Original gold */
    opacity: 0; animation: logoPop 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards 0.3s; /* Springy pop */
    position: relative; z-index: 2; border-radius: 50%;
}
#loading-circle {
    position: absolute; top: 0; left: 0; width: 200px; height: 200px;
    pointer-events: none; z-index: 1; animation: spin 1.6s linear infinite;
    filter: drop-shadow(0 0 8px var(--original-gold-highlight)); /* Original gold */
}
/* NEW Loading Dots - Styled with original gold */
#loading-dots { display: flex; justify-content: center; align-items: center; margin-top: var(--space-sm); }
#loading-dots .dot {
    width: 10px; height: 10px; margin: 0 var(--space-xs);
    background-color: var(--original-gold-highlight); /* Original gold */
    border-radius: 50%;
    animation: loadingDotAnimation 1.4s infinite ease-in-out;
}
#loading-dots .dot:nth-child(1) { animation-delay: -0.32s; }
#loading-dots .dot:nth-child(2) { animation-delay: -0.16s; }
@keyframes loadingDotAnimation {
    0%, 80%, 100% { transform: scale(0.5); opacity: 0.4; }
    40% { transform: scale(1.0); opacity: 1; }
}
/* End Loading Screen Styles */

@keyframes gradientShift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
@keyframes logoPop { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
@keyframes spin { 100% { transform: rotate(360deg); } }
@keyframes ripple { 0% { transform: scale(1); opacity: 1; } 100% { transform: scale(2.5); opacity: 0; } }

/* --- TYPOGRAPHY & GENERAL TEXT STYLING --- */
h1, h2, h3, h4, h5, h6 {
    margin-top: 0;
    margin-bottom: var(--space-md); /* Consistent bottom margin for headings */
    line-height: 1.3; /* Tighter line height for headings */
    font-weight: 600; /* Default weight, can be overridden */
}
p { margin-bottom: var(--space-md); font-weight: 300; text-shadow: var(--text-shadow-soft); }
a { color: var(--secondary-accent-blue); text-decoration: none; transition: color 0.3s ease, opacity 0.3s ease; }
a:hover { color: var(--muted-gold-highlight); opacity: 0.85; }

/* --- NAVIGATION STYLES - Refined Glassmorphism & Spacing --- */
.nav-container {
    position: fixed; top: 0; left: 0; right: 0; width: 100%; padding: 0;
    z-index: 100; opacity: 0; transform: translateY(-100%); /* Start off-screen */
    /* MODIFIED: Added background and box-shadow transitions */
    transition: opacity 0.8s ease-out, transform 0.8s ease-out, background 0.4s ease, box-shadow 0.4s ease;
    pointer-events: none; visibility: hidden;
    /* MODIFIED: Initial background and shadow using new variables */
    background: var(--nav-bg-initial);
    box-shadow: var(--nav-shadow-initial);
}
.nav-container.visible { opacity: 1; transform: translateY(0); pointer-events: all; visibility: visible; }
/* ADDED: Class for scrolled navigation state */
.nav-container.nav-scrolled {
    background: var(--nav-bg-scrolled);
    box-shadow: var(--nav-shadow-scrolled);
}
nav {
    display: flex; justify-content: space-between; align-items: center;
    padding: var(--space-sm) var(--space-lg); /* Use spacing vars */
    /* background: var(--glass-bg-nav); REMOVED - Handled by .nav-container */
    backdrop-filter: var(--glass-blur-amount); -webkit-backdrop-filter: var(--glass-blur-amount);
    border-bottom: 1px solid var(--glass-border-light); /* Softer border */
    /* box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25); REMOVED - Handled by .nav-container */
    width: 100%; box-sizing: border-box; height: 70px; /* Fixed height */
}
.nav-logo {
    height: 40px; /* Slightly smaller for sleekness */ width: auto;
    filter: drop-shadow(0 0 8px var(--muted-gold-highlight)) brightness(1.05); /* Subtler glow */
    margin-left: var(--space-md); transition: transform 0.3s ease, filter 0.3s ease;
}
.nav-logo:hover { transform: scale(1.03); filter: drop-shadow(0 0 10px var(--muted-gold-highlight)) brightness(1.1); }
.nav-links { display: flex; gap: var(--space-sm); justify-content: center; flex-grow: 1; }
.nav-link {
    font-family: var(--font-nav); color: var(--primary-light-text);
    font-size: 0.9rem; /* Adjusted for sleekness */ font-weight: 500; letter-spacing: 1px; /* More spacing */
    text-transform: uppercase; transition: all 0.25s ease-in-out; /* Faster transition */
    position: relative; padding: var(--space-xs) var(--space-md); /* Use spacing vars */
    border-radius: 4px; /* Subtle radius */
}
.nav-link:hover, .nav-link.active {
    color: var(--muted-gold-highlight);
    text-shadow: 0 0 10px rgba(200, 181, 136, 0.4);
    background: rgba(200, 181, 136, 0.07); /* Very subtle gold tint */
}
.nav-link::after { /* Underline effect */
    content: ''; position: absolute; bottom: 0px; left: 50%; transform: translateX(-50%);
    width: 0; height: 2px; background: var(--muted-gold-highlight);
    opacity: 0; transition: width 0.3s ease, opacity 0.3s ease; border-radius: 1px;
}
.nav-link:hover::after, .nav-link.active::after { width: 60%; opacity: 1; }
.social-icon {
    margin-right: var(--space-md); display: flex; align-items: center;
}
.social-icon img.facebook-logo {
    width: 26px; height: 26px; /* Slightly adjusted */
    filter: grayscale(80%) brightness(1.3) contrast(1.5) opacity(0.8); /* Softer monochrome */
    transition: filter 0.3s ease, opacity 0.3s ease;
}
.social-icon:hover img.facebook-logo { filter: none; opacity: 1; }
.social-icon:hover { transform: scale(1.05); }

/* --- HOME CONTENT - Refined Sizing & Typography --- */
.home-content {
    text-align: center; position: relative; width: 100%;
    min-height: calc(100vh - 90px); /* Adjusted for nav height */
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    transition: opacity 1s ease-out; z-index: 10;
    padding: var(--space-lg) var(--space-md); box-sizing: border-box;
}
.main-logo {
    width: 180px; height: 180px; /* Sleeker size */ display: block;
    margin: var(--space-lg) auto var(--space-md);
    filter: drop-shadow(0 0 12px var(--muted-gold-highlight));
    border-radius: 50%;
}
.home-title { /* Main Page Title */
    font-family: var(--font-heading-main); font-size: 2.6rem; /* Adjusted size */
    color: var(--muted-gold-highlight); margin-bottom: var(--space-sm);
    text-shadow: var(--text-shadow-strong); font-weight: 700; letter-spacing: 1.5px; /* Increased spacing */
    position: relative; animation: textWave 8s ease-in-out infinite;
}
@keyframes textWave { 0%,100%{transform:translateY(0)} 25%{transform:translateY(-3px)} 50%{transform:translateY(0)} 75%{transform:translateY(3px)} } /* Subtler wave */
.home-title::before { /* Kept particle glow, ensure it's subtle */
    content:'';position:absolute;top:0;left:50%;transform:translateX(-50%);width:150%;height:120%;
    pointer-events:none;z-index:-1;opacity:0.2;
    background:radial-gradient(circle at center, rgba(200,181,136,0.1), transparent 70%);
    filter:blur(10px);animation:glowShift 10s ease-in-out infinite alternate; /* Slower, alternate */
}
@keyframes glowShift { 0%{opacity:0.2;transform:translateX(-50%) scale(1)} 100%{opacity:0.3;transform:translateX(-50%) scale(1.1)} }
.home-subtitle { /* This is the subtitle directly under the main page title */
    font-family: var(--font-body); font-size: 1.3rem; /* Adjusted */
    color: var(--primary-light-text); margin-bottom: var(--space-lg);
    font-weight: 300; /* Lighter for subtitle */
    letter-spacing: 0.5px;
    /* MODIFIED text-shadow as per request for better definition */
    text-shadow: 0 1px 2px rgba(0,0,0,0.7), 0 0 10px rgba(249,217,118,0.15);
}

/* --- HERO WELCOME (Below main title) - Sizing & Glassmorphism --- */
.hero-welcome {
    text-align: center; margin: 0 auto var(--space-xl); padding: var(--space-lg) var(--space-md);
    background: var(--glass-bg-base);
    backdrop-filter: var(--glass-blur-amount); -webkit-backdrop-filter: var(--glass-blur-amount);
    border-radius: 15px; max-width: 900px; /* MODIFIED SIZE */
    border: 1px solid var(--glass-border-light);
    box-shadow: 0 6px 25px rgba(0,0,0,0.15); /* Refined shadow */
}
.hero-title { /* "Island's Premier Yacht Club" */
    font-family: var(--font-heading-main); font-size: 2.2rem; /* Adjusted for container */
    font-weight: 600; color: var(--primary-light-text);
    margin-bottom: var(--space-sm); letter-spacing: 1px; /* Refined spacing */
    text-shadow: var(--text-shadow-strong);
}
.hero-subtitle { /* "Your Tranquil Haven..." (this specific instance) */
    font-family: var(--font-body); font-size: 1.15rem; /* Adjusted */
    color: var(--primary-light-text); font-weight: 300; letter-spacing: 0.3px;
    /* MODIFIED text-shadow for this specific subtitle instance for consistency */
    text-shadow: 0 1px 2px rgba(0,0,0,0.7), 0 0 10px rgba(249,217,118,0.15);
    margin-bottom: 0; /* Remove bottom margin if it's the last element */
}

/* --- INTRO TEXT & AMENITIES - Layout, Sizing, Glassmorphism --- */
.intro-text {
    max-width: 1100px; /* Slightly narrower for better readability */
    margin: 0 auto var(--space-xl); color: var(--primary-light-text);
    padding: 0 var(--space-md);
}
.welcome-section { background: transparent; border-radius: 15px; padding: var(--space-lg) 0; /* Simplified padding */ }
.amenities-grid {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(270px, 1fr)); /* Slightly smaller min */
    gap: var(--space-lg); /* Consistent gap */ margin-bottom: var(--space-xl);
}
.amenity-card {
    background: var(--glass-bg-base);
    backdrop-filter: var(--glass-blur-amount); -webkit-backdrop-filter: var(--glass-blur-amount);
    border: 1px solid var(--glass-border-gold-accent);
    border-radius: 12px; padding: var(--space-lg); /* MODIFIED PADDING */
    transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease; /* Added background transition */
    box-shadow: 0 5px 20px rgba(0,0,0,0.1); /* Softer shadow */
    display: flex; flex-direction: column; /* For better content alignment */
}
.amenity-card:hover {
    transform: translateY(-5px) scale(1.01); /* Subtler hover */
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    background: rgba(10, 47, 81, 0.45); /* Slightly darker on hover */
}
.amenity-icon {
    font-size: 2rem; /* Adjusted */ margin-bottom: var(--space-md); display: block;
    color: var(--muted-gold-highlight); text-shadow: 0 0 12px rgba(200,181,136,0.3);
}
.amenity-card h3 {
    font-family: var(--font-heading-card); font-size: 1.4rem; /* MODIFIED SIZE */
    color: var(--muted-gold-highlight); margin-bottom: var(--space-sm);
    font-weight: normal; /* Marcellus SC looks good normal */
    text-shadow: var(--text-shadow-soft);
}
.amenity-card p { font-size: 0.9rem; /* MODIFIED SIZE */ line-height: 1.65; margin-bottom: 0; } /* No bottom margin for last p */

.visit-section { margin-top: var(--space-xl); padding-top: var(--space-lg); border-top: 1px solid var(--glass-border-gold-accent); }
.business-details {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); /* Adjusted */
    gap: var(--space-md); padding: var(--space-lg);
    background: rgba(10, 47, 81, 0.1); /* Very subtle glass */
    backdrop-filter: calc(var(--glass-blur-amount) - 6px); -webkit-backdrop-filter: calc(var(--glass-blur-amount) - 6px);
    border-radius: 12px;
}
.detail-item { display: flex; align-items: center; gap: var(--space-sm); padding: var(--space-sm); border-radius: 8px; }
.detail-item i { font-size: 1.3rem; color: var(--secondary-accent-blue); }
.detail-item span { font-family: var(--font-body); font-size: 0.95rem; color: var(--primary-light-text); }
.announcement { /* MODIFIED "Taco Tuesday" styles */
    grid-column: 1 / -1; display: flex; align-items: center; justify-content: flex-start; /* Ensure left alignment */
    gap: var(--space-sm); /* Original gap from user's file was 1rem, adjusted to var */
    margin-top: var(--space-md); /* Original margin-top was 1rem */
    padding: var(--space-md); /* Original padding was 1.5rem */
    border-radius: 10px; /* Original radius */
    /* MODIFIED for standout */
    background: var(--muted-gold-highlight);
    color: var(--primary-dark-blue);
    font-weight: 600;
    text-shadow: 1px 1px 0px rgba(255,255,255,0.15);
    border: 1px solid rgba(0,0,0,0.1); /* Added subtle border */
}
.announcement i {
    font-size: 1.5rem; /* Original size was 1.8rem */
    color: var(--primary-dark-blue); /* Match text color */
    animation: pulseStar 2.5s infinite ease-in-out;
}
@keyframes pulseStar { 0%,100%{transform:scale(1);opacity:1} 50%{transform:scale(1.15);opacity:0.7} } /* Star specific pulse */
.announcement span {
    font-family: var(--font-body); font-size: 1.05rem; /* Original size was 1.2rem */
    color: var(--primary-dark-blue); /* Match text color */
    /* font-weight is on parent .announcement */
}

/* --- SERVICES SHOWCASE (Homepage) - Refined --- */
.services-showcase {
    margin: var(--space-xl) 0; padding: var(--space-lg);
    background: linear-gradient(135deg, rgba(10, 47, 81, 0.25), rgba(10, 47, 81, 0.1));
    backdrop-filter: var(--glass-blur-amount); -webkit-backdrop-filter: var(--glass-blur-amount);
    border-radius: 12px; border: 1px solid var(--glass-border-gold-accent);
}
.services-showcase h3 { /* Section title, e.g., "Experience World-Class Services" */
    text-align: center; color: var(--primary-light-text); font-family: var(--font-heading-section);
    font-size: 1.7rem; /* Adjusted */ margin-bottom: var(--space-lg); text-transform: uppercase;
    letter-spacing: 2px; /* More spacing for uppercase */ text-shadow: var(--text-shadow-soft);
}
.services-grid { /* Grid for service highlights on homepage */
    display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); /* Adjusted min size */
    gap: var(--space-lg);
}
.service-highlight { /* Individual highlight box */
    padding: var(--space-md); background: var(--glass-bg-base);
    backdrop-filter: var(--glass-blur-amount); -webkit-backdrop-filter: var(--glass-blur-amount);
    border-radius: 10px; border: 1px solid var(--glass-border-gold-accent);
    text-align: center; transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.service-highlight:hover { transform: translateY(-4px); box-shadow: 0 8px 20px rgba(0,0,0,0.15); }
.service-highlight .icon { font-size: 2rem; margin-bottom: var(--space-sm); display: block; color: var(--secondary-accent-blue); }
.service-highlight h4 { /* Title of highlight */
    color: var(--muted-gold-highlight); font-family: var(--font-heading-card);
    font-size: 1.1rem; /* Adjusted */ margin-bottom: var(--space-xs); font-weight: normal;
}
.service-highlight p { font-size: 0.85rem; color: var(--primary-light-text); font-weight: 300; line-height: 1.5; margin-bottom: 0; }

/* --- MEMBERSHIP BENEFITS (Homepage) - Refined --- */
.membership-benefits {
    padding: var(--space-xl); background: var(--glass-bg-base);
    backdrop-filter: var(--glass-blur-amount); -webkit-backdrop-filter: var(--glass-blur-amount);
    border-radius: 15px; border: 1px solid var(--glass-border-gold-accent);
    margin: var(--space-xl) auto; max-width: 1200px; /* Adjusted max-width */
    box-shadow: 0 10px 35px rgba(0, 0, 0, 0.2); /* Slightly stronger shadow for prominent section */
}
.membership-benefits .elegant-title { /* "Exclusive Member Benefits" */
    font-family: var(--font-heading-section); color: var(--muted-gold-highlight);
    font-size: 2rem; /* Adjusted */ margin-bottom: var(--space-md); text-align: center;
    text-transform: uppercase; letter-spacing: 2.5px; text-shadow: var(--text-shadow-strong);
}
.benefits-intro { /* p tag specifically */
    color: var(--primary-light-text); font-size: 1.05rem; text-align: center;
    margin: 0 auto var(--space-lg); /* Centered */ font-family: var(--font-body); font-weight: 300;
    max-width: 700px; /* Optimal reading width */
    background: transparent !important; border: none !important; padding: 0 !important; /* Override general p styles */
}
.benefits-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* Explicitly 3 columns from original CSS */
    gap: var(--space-lg);
    margin-bottom: var(--space-xl);
    align-items: stretch; /* ADDED to make cards in a row equal height */
}
.benefit-category { /* Each of the 3 category boxes */
    background: rgba(10, 47, 81, 0.2); /* Darker, subtler glass for inner cards */
    backdrop-filter: calc(var(--glass-blur-amount) - 5px); -webkit-backdrop-filter: calc(var(--glass-blur-amount) - 5px);
    border: 1px solid var(--glass-border-light); /* Light border for these */
    border-radius: 10px; padding: var(--space-lg);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    display: flex; flex-direction: column;
    /* min-height: 450px; REMOVED to address empty space issue */
    height: 100%; /* RETAINED from original - works with align-items: stretch on parent */
}
.benefit-category h4 { /* "Partner Discounts", "Club Privileges", etc. */
    color: var(--secondary-accent-blue); font-size: 1.25rem; margin-bottom: var(--space-md);
    text-align: center; font-family: var(--font-heading-card); font-weight: normal;
    text-shadow: var(--text-shadow-soft); position: relative;
}
.benefit-category h4::after {
    content: ''; position: absolute; bottom: -10px; left: 50%; transform: translateX(-50%);
    width: 40px; height: 2px; background: var(--secondary-accent-blue); opacity: 0.4;
}
.benefits-list {
    list-style: none; padding: 0; margin: 0;
    flex-grow: 1; /* ADDED to allow list to take available vertical space */
}
.benefits-list li {
    padding: var(--space-sm); margin-bottom: var(--space-sm);
    background: rgba(10, 47, 81, 0.25); /* Even subtler background for list items */
    border-radius: 6px; border-left: 3px solid var(--secondary-accent-blue); /* Accent border on left */
    text-align: left; transition: transform 0.2s ease, background-color 0.2s ease;
    font-size: 0.85rem; font-weight: 300; padding-left: var(--space-md);
}
.benefits-list li:hover { transform: translateX(3px); background: rgba(80, 133, 165, 0.15); }
.membership-cta {
    text-align: center; margin-top: var(--space-xl); padding: var(--space-lg);
    background: rgba(200, 181, 136, 0.05); /* Very subtle gold tint */
    border-radius: 10px; border-top: 1px solid var(--glass-border-gold-accent);
}
.membership-cta p { /* Paragraph in CTA */
    color: var(--muted-gold-highlight); font-size: 1.1rem; margin-bottom: var(--space-md);
    font-family: var(--font-body); font-weight: 400;
    background: transparent !important; border: none !important; padding: 0 !important; text-align: center !important;
}
.premium-button { /* Main CTA button */
    display: inline-block; padding: var(--space-sm) var(--space-xl); /* Generous padding */
    background: linear-gradient(45deg, var(--muted-gold-highlight), #D1B683); /* Slightly adjusted gradient */
    border: none; /* Remove border for cleaner look */
    border-radius: 50px; /* Pill shape */
    color: var(--primary-dark-blue); text-decoration: none;
    font-size: 1rem; font-weight: 600; letter-spacing: 0.5px;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); /* Smooth physical transition */
    text-shadow: none; box-shadow: 0 3px 8px rgba(0,0,0,0.15), inset 0 -2px 0px rgba(0,0,0,0.1); /* Subtle 3D effect */
}
.premium-button:hover {
    background: linear-gradient(45deg, #D1B683, var(--muted-gold-highlight));
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 5px 15px rgba(200, 181, 136, 0.3), inset 0 -1px 0px rgba(0,0,0,0.05);
    color: #072338; /* Darker text on hover */
}

/* Event Link (Facebook Button on Home) */
.event-link {
    color: var(--primary-light-text); /* MODIFIED for better contrast */
    text-decoration: none; font-weight: 500;
    transition: all 0.3s ease; display: inline-flex; align-items: center;
    gap: var(--space-sm); padding: var(--space-sm) var(--space-md); border-radius: 8px;
    background: var(--glass-bg-base);
    backdrop-filter: var(--glass-blur-amount); -webkit-backdrop-filter: var(--glass-blur-amount);
    border: 1px solid var(--glass-border-gold-accent); font-size: 0.9rem;
    text-shadow: 0 1px 3px rgba(0,0,0,0.7); /* ADDED for readability */
}
.event-link:hover {
    color: var(--muted-gold-highlight); text-shadow: 0 0 8px rgba(200, 181, 136, 0.3);
    background: rgba(10, 47, 81, 0.45); border-color: rgba(200, 181, 136, 0.35);
    transform: translateY(-2px);
}
/* Ensure .facebook-logo class is styled correctly for this button if different from nav */
.event-link .facebook-logo { filter: grayscale(80%) brightness(1.5) opacity(0.8); width: 18px; height: 18px; }
.event-link:hover .facebook-logo { filter: none; opacity: 1;}

/* --- CONTENT SECTIONS (Popups) - Refined Glassmorphism & Typography --- */
.content-section { /* The full-screen overlay for popups */
    position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    display: flex; justify-content: center; align-items: center;
    opacity: 0; pointer-events: none; visibility: hidden;
    transition: opacity 0.4s ease-out, visibility 0.4s ease-out; /* Faster transition */
    z-index: 1000; /* Ensure above nav */ padding: var(--space-md); box-sizing: border-box;
    background-color: rgba(5, 20, 34, 0.75); /* Darker, slightly less opaque overlay */
    backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); /* Blur for the overlay background */
}
.content-section.active { opacity: 1; pointer-events: all; visibility: visible; }

.content-container { /* The actual popup box */
    max-width: 1000px; /* Slightly narrower for better focus */ width: 90%;
    padding: var(--space-xl); /* Consistent padding */
    border-radius: 12px;
    background: var(--glass-bg-popup); /* Glassy background */
    backdrop-filter: var(--glass-blur-amount); -webkit-backdrop-filter: var(--glass-blur-amount);
    border: 1px solid var(--glass-border-light);
    box-shadow: 0 15px 50px rgba(0, 0, 0, 0.35), 0 0 0 1px var(--glass-border-light); /* Enhanced shadow & border */
    color: var(--primary-light-text); max-height: 90vh; /* Increased max-height */
    overflow-y: auto; position: relative; margin: auto; box-sizing: border-box;
    transform: scale(0.95); /* Start slightly small for pop effect */
    opacity: 0; /* Start transparent for fade-in effect */
    transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.3s ease-out; /* Pop and fade */
}
.content-section.active .content-container {
    transform: scale(1);
    opacity: 1;
}

/* Scrollbar for popup content */
.content-container::-webkit-scrollbar { width: 8px; }
.content-container::-webkit-scrollbar-track { background: rgba(240, 244, 248, 0.05); border-radius: 4px; }
.content-container::-webkit-scrollbar-thumb {
    background: var(--secondary-accent-blue); border-radius: 4px;
    border: 2px solid transparent; background-clip: content-box;
}
.content-container::-webkit-scrollbar-thumb:hover { background: var(--muted-gold-highlight); }

.section-logo { /* Logo on top of popup - REVERTED to user's original sizing */
    width: 100px; height: 100px; position: absolute; top: -50px; /* Original positioning */
    left: 50%; transform: translateX(-50%);
    filter: drop-shadow(0 0 10px var(--muted-gold-highlight));
    border-radius: 50%; border: 3px solid var(--primary-dark-blue); /* Thicker border */
    z-index: 2; background-color: var(--primary-dark-blue);
    box-shadow: 0 0 15px rgba(0,0,0,0.3);
}
.close-btn {
    position: absolute; top: var(--space-md); right: var(--space-md);
    width: 30px; height: 30px;
    background: rgba(240, 244, 248, 0.08); border-radius: 50%;
    border: 1px solid var(--glass-border-gold-accent);
    display: flex; justify-content: center; align-items: center; cursor: pointer;
    transition: all 0.25s ease; z-index: 10;
}
.close-btn:hover { background: var(--muted-gold-highlight); border-color: var(--muted-gold-highlight); transform: rotate(90deg) scale(1.1); }
.close-btn:hover::before, .close-btn:hover::after { background: var(--primary-dark-blue); }
.close-btn::before, .close-btn::after {
    content: ''; position: absolute; width: 14px; height: 2px; background: var(--muted-gold-highlight);
}
.close-btn::before { transform: rotate(45deg); } .close-btn::after { transform: rotate(-45deg); }

.content-container h2 { /* Titles inside popups */
    font-family: var(--font-heading-section); font-size: 2rem; /* Adjusted */
    color: var(--muted-gold-highlight); margin-top: var(--space-lg); /* Space for logo */
    margin-bottom: var(--space-lg); font-weight: 700;
    letter-spacing: 1px; text-align: center; text-shadow: var(--text-shadow-strong);
}
/* Paragraphs inside popups */
.content-container p:not(.services-intro):not(.benefits-intro):not(.membership-cta p):not([style*="text-align:center"]) {
    line-height: 1.75; /* Slightly more spacious */ margin-bottom: var(--space-md); font-weight: 300;
    text-align: left; text-shadow: var(--text-shadow-soft);
    padding: var(--space-sm) var(--space-md); border-radius: 8px;
    background: rgba(10, 47, 81, 0.15); /* Very subtle inner glass */
    backdrop-filter: calc(var(--glass-blur-amount) - 7px); -webkit-backdrop-filter: calc(var(--glass-blur-amount) - 7px);
    border: 1px solid var(--glass-border-light); font-size: 0.9rem; /* Adjusted */
}
/* Specific paragraphs to remain unstyled by the above */
.content-container p.services-intro, .content-container p.benefits-intro,
.content-container p[style*="text-align:center"], .membership-cta p {
    text-align: center; font-size: 1.05rem; /* Standardized size for intros */
    background: transparent !important; border: none !important; padding: 0 !important;
    max-width: 750px; margin-left: auto; margin-right: auto; margin-bottom: var(--space-lg);
}

.reviews-section { /* Google Reviews embed section inside popups */
    margin-top: var(--space-xl); padding: var(--space-lg);
    background: rgba(10, 47, 81, 0.1); /* Very subtle */
    backdrop-filter: calc(var(--glass-blur-amount) - 7px); -webkit-backdrop-filter: calc(var(--glass-blur-amount) - 7px);
    border-radius: 10px; border: 1px solid var(--glass-border-light);
    width: 100%; box-sizing: border-box;
}
.reviews-section h3 { /* "What Our Members Say" */
    color: var(--secondary-accent-blue); font-family: var(--font-heading-section);
    font-size: 1.5rem; margin-bottom: var(--space-md); text-align: center;
    text-shadow: var(--text-shadow-soft);
}

/* --- PREMIUM SERVICES (Services Popup) - Refined --- */
.services-container { max-width: 1100px !important; padding: var(--space-xl) !important; } /* Consistent max-width */
.services-highlights { /* "24/7 Support", "15+ Years", etc. stats */
    display: flex; justify-content: center; flex-wrap: wrap;
    gap: var(--space-xl); margin: var(--space-lg) 0 var(--space-xl);
}
.highlight-stat { display: flex; flex-direction: column; align-items: center; gap: var(--space-xs); }
.stat-number {
    font-family: var(--font-heading-main); font-size: 2rem; /* Adjusted */
    color: var(--muted-gold-highlight); font-weight: 700;
    text-shadow: 0 0 10px rgba(200,181,136,0.4);
}
.stat-label {
    font-family: var(--font-body); font-size: 0.9rem; /* Adjusted */
    color: var(--primary-light-text); text-transform: uppercase;
    letter-spacing: 1.5px; font-weight: 400; opacity: 0.8; /* Subtler */
}
.services-intro { /* Text directly under "World-Class Services" in popup */
    font-size: 1.1rem; /* Adjusted */
}
.services-grid.popup-grid { /* Grid for individual service cards in the popup */
    display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Adjusted minmax */
    gap: var(--space-lg); margin: var(--space-xl) 0; padding: 0;
}
.service-card { /* Individual service card in the popup */
    background: var(--glass-bg-base); /* Use base glass for cards inside popup */
    backdrop-filter: var(--glass-blur-amount); -webkit-backdrop-filter: var(--glass-blur-amount);
    border: 1px solid var(--glass-border-gold-accent);
    border-radius: 10px; padding: var(--space-lg); /* Consistent padding */
    transition: all 0.3s ease-out; /* Smoother transition */
    display: flex; flex-direction: column; box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}
.service-card:hover {
    transform: translateY(-5px) scale(1.01); border-color: rgba(200,181,136,0.4);
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    background: rgba(10, 47, 81, 0.45); /* Darken slightly */
}
.service-icon { /* Text-based icons: âš“ ðŸ›¥ï¸ etc. */
    font-family: 'Arial', sans-serif; font-size: 2.2rem; /* Adjusted */
    margin-bottom: var(--space-md); color: var(--secondary-accent-blue);
    text-shadow: 0 0 12px rgba(80,133,165,0.3);
}
.service-card h3 { /* Title of service card: "Port & Immigration" */
    color: var(--muted-gold-highlight); font-family: var(--font-heading-card);
    font-size: 1.5rem; /* Adjusted */ margin-bottom: var(--space-sm); font-weight: normal;
    text-shadow: var(--text-shadow-soft);
}
.service-details h4 { /* Sub-titles within service card: "Thai Customs Visa" */
    color: var(--secondary-accent-blue); font-family: var(--font-body);
    font-size: 1rem; /* Adjusted */ margin: var(--space-md) 0 var(--space-xs);
    font-weight: 600; opacity: 0.9;
}
.service-details p { /* Description for sub-service */
    font-size: 0.85rem; /* Adjusted */ line-height: 1.6; margin-bottom: var(--space-sm); font-weight: 300;
    background: none !important; border: none !important; padding: 0 !important;
    text-align: left; text-shadow: var(--text-shadow-soft); opacity: 0.9;
}
.service-cta { /* Container for "Contact Captain Brent" button */
    text-align: center; margin-top: var(--space-xl); padding: var(--space-lg);
    background: rgba(200,181,136,0.05); border-radius: 10px;
    border-top: 1px solid var(--glass-border-gold-accent);
}
.service-cta p { /* Text above button */
    font-size: 1.05rem; /* Adjusted */
}

/* --- GALLERY - Refined Item Display --- */
.gallery-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); /* Smaller min for more items */ gap: var(--space-sm); }
.gallery-item {
    border-radius: 8px; overflow: hidden; aspect-ratio: 1/1; cursor: pointer;
    border: 1px solid var(--glass-border-gold-accent);
    transition: transform 0.3s ease, box-shadow 0.3s ease, opacity 0.3s ease;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1); opacity: 0.9;
}
.gallery-item:hover { transform: scale(1.04); box-shadow: 0 6px 20px rgba(0,0,0,0.15); opacity: 1; }
.gallery-item img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s ease-out; }
.gallery-item:hover img { transform: scale(1.08); }

/* Lightbox (for gallery) */
.lightbox {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(5,20,34,0.92); /* Slightly more see-through */
    display: flex; justify-content: center; align-items: center;
    z-index: 1100; /* Above popups */ backdrop-filter: blur(6px);
}
.lightbox img {
    max-width: 90%; max-height: 90%; object-fit: contain;
    border: 2px solid var(--glass-border-gold-accent);
    border-radius: 8px; box-shadow: 0 0 40px rgba(0,0,0,0.4);
}

/* --- CONTACT FORM - Refined Inputs & Layout --- */
.contact-form { background: transparent; padding: 0; /* Removed its own padding, rely on .content-container */ border-radius: 10px; margin-top: var(--space-lg); }
.form-group { margin-bottom: var(--space-md); text-align: left; }
.form-group label {
    display: block; margin-bottom: var(--space-xs); color: var(--secondary-accent-blue);
    font-weight: 500; font-size: 0.85rem; text-shadow: none; text-transform: uppercase; letter-spacing: 0.5px;
}
.form-control {
    width: 100%; padding: var(--space-sm) var(--space-md); border-radius: 6px;
    border: 1px solid var(--glass-border-light); /* Lighter border for inputs */
    background: rgba(10, 47, 81, 0.3); /* Subtle glass for inputs */
    backdrop-filter: calc(var(--glass-blur-amount) - 7px); -webkit-backdrop-filter: calc(var(--glass-blur-amount) - 7px);
    color: var(--primary-light-text); font-family: var(--font-body); font-size: 0.9rem;
    transition: border-color 0.25s ease, box-shadow 0.25s ease, background-color 0.25s ease;
    box-sizing: border-box; /* Ensure padding doesn't expand width */
}
.form-control:focus {
    outline: none; border-color: var(--muted-gold-highlight);
    box-shadow: 0 0 0 2.5px rgba(200,181,136,0.25); /* Focus glow */
    background-color: rgba(10, 47, 81, 0.4);
}
textarea.form-control { min-height: 100px; /* Adjusted */ resize: vertical; }
.submit-btn { /* General purpose submit button */
    background: var(--secondary-accent-blue); color: var(--primary-light-text);
    border: none; padding: var(--space-sm) var(--space-xl);
    border-radius: 50px; cursor: pointer; transition: all 0.3s ease;
    font-family: var(--font-nav); font-weight: 600; letter-spacing: 0.5px;
    text-shadow: 0 1px 1px rgba(0,0,0,0.15); font-size: 0.9rem;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
.submit-btn:hover {
    background: var(--muted-gold-highlight); color: var(--primary-dark-blue);
    transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}
.form-success {
    background: rgba(135,169,168,0.15); border: 1px solid var(--subtle-seafoam-accent);
    color: var(--primary-light-text); padding: var(--space-md); border-radius: 6px;
    margin-top: var(--space-md); text-align: center; display: none; font-size: 0.9rem;
    border-left: 4px solid var(--subtle-seafoam-accent);
}
.form-success.visible { display: block; }

/* --- ACCOMMODATION SECTION (Popup) - Refined Cards --- */
.accommodation-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: var(--space-lg); margin-top: var(--space-lg); }
.bungalow-card {
    background: var(--glass-bg-base); /* Base glass for cards in popup */
    backdrop-filter: var(--glass-blur-amount); -webkit-backdrop-filter: var(--glass-blur-amount);
    border-radius: 10px; overflow: hidden; border: 1px solid var(--glass-border-gold-accent);
    transition: transform 0.3s ease, box-shadow 0.3s ease; box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}
.bungalow-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.15), 0 0 0 1px var(--glass-border-gold-accent); }
.bungalow-img { width: 100%; height: 160px; /* Adjusted */ object-fit: cover; }
.bungalow-info { padding: var(--space-md); }
.bungalow-title {
    font-family: var(--font-heading-card); font-size: 1.3rem; /* Adjusted */
    color: var(--muted-gold-highlight); margin-bottom: var(--space-xs);
    text-shadow: var(--text-shadow-soft); font-weight: normal;
}
.bungalow-price {
    font-family: var(--font-body); font-size: 1rem; /* Adjusted */
    color: var(--primary-light-text); margin-bottom: var(--space-sm);
    font-weight: 400; opacity: 0.9;
}
.bungalow-desc { font-size: 0.85rem; margin-bottom: var(--space-md); line-height: 1.6; opacity: 0.85; }
.book-btn { /* Booking button on bungalow card */
    background: var(--secondary-accent-blue); color: var(--primary-light-text);
    border: none; padding: var(--space-sm) var(--space-lg);
    border-radius: 50px; cursor: pointer; transition: all 0.3s ease;
    font-family: var(--font-nav); text-decoration: none; display: inline-block;
    font-weight: 500; font-size: 0.85rem; letter-spacing: 0.3px;
}
.book-btn:hover { background: var(--muted-gold-highlight); color: var(--primary-dark-blue); transform: translateY(-1px); }

/* --- Water particle effects (Kept as original, visual element) --- */
.particles-container {position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0;} /* Ensure z-index is below text */
.water-particle,.water-particle:nth-child(2n),.water-particle:nth-child(3n),.water-particle:nth-child(4n),.water-particle:nth-child(5n){position:absolute;background:hsla(0,0%,100%,.5);border-radius:50%;pointer-events:none;animation:float 3s infinite ease-out}
.water-particle{width:4px;height:4px}
.water-particle:nth-child(2n){width:6px;height:6px;animation-duration:3.5s;animation-delay:.5s}
.water-particle:nth-child(3n){width:3px;height:3px;background:hsla(0,0%,100%,.7);animation-duration:2.5s;animation-delay:1s}
.water-particle:nth-child(4n){width:5px;height:5px;background:hsla(220,50%,90%,.6);animation-duration:4s;animation-delay:1.5s}
.water-particle:nth-child(5n){width:3px;height:3px;background:hsla(190,60%,80%,.7);animation-duration:2s;animation-delay:0.2s}
@keyframes float {
    0% { transform: translateY(0) translateX(0) scale(0.5); opacity: 0; } /* Start smaller and faded */
    25% { opacity: 0.7; }
    75% { opacity: 0.7; }
    100% { transform: translateY(-70px) translateX(10px) scale(1); opacity: 0; } /* End slightly larger */
}


/* --- DASHBOARD WIDGETS (Homepage) - Styling for iframe containers, respecting "do not change" for internal/header --- */
.widget-grid { /* Container for the captain-widgets (iframes) */
    max-width: 1200px; /* Reverted to user's original max-width if it was 1400px, or adjusted for 3 columns */
    margin: var(--space-lg) auto; /* Consistent spacing */
    padding: 0 var(--space-md); /* Padding for the grid container itself */
    gap: var(--space-lg);
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* Explicit 3 columns for the dashboard on home page */
}

.captain-widget { /* From user's inline styles, ensure it overrides generic .widget if both applied */
    background: rgba(0,0,0,0.6) !important; /* Darker, more opaque from original */
    padding: 15px !important;
    border-radius: 10px !important;
    border: 1px solid rgba(249,217,118,0.15) !important; /* Original gold border */
    text-align: center !important;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5) !important; /* Original shadow */
    color: #f0f4f8 !important; /* Using a light text color for content inside these dark widgets */
    /* ADDED for iframe flex behavior */
    display: flex;
    flex-direction: column;
}
.captain-widget h4 { /* For titles *inside* captain-widget IFRAME containers */
    color: var(--original-gold-highlight) !important; /* Use original gold */
    margin-top: 0 !important; margin-bottom: 10px !important;
    font-family: 'Marcellus SC', serif !important; font-size: 1.1em !important; /* Adjusted */
    font-weight: normal !important; letter-spacing: 0.5px !important;
}
/* Styling for iframes within .captain-widget */
.captain-widget iframe {
    width: 100%;
    flex-grow: 1; /* ADDED to allow iframe to fill vertical space */
    border: none;
    border-radius: 6px; /* Softer radius for iframe itself */
    /* height is defined in HTML for these iframes, flex-grow helps if content is larger */
}


/* Generic .widget styling - from user's original multiple definitions, consolidated */
.widget {
    background: var(--glass-bg-base); /* Apply glass effect */
    backdrop-filter: var(--glass-blur-amount); -webkit-backdrop-filter: var(--glass-blur-amount);
    border: 1px solid var(--glass-border-light);
    border-radius: 12px; /* Softer radius */
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    overflow: hidden; color: var(--primary-light-text); padding: var(--space-md);
    display: flex; flex-direction: column;
}
.widget:hover { transform: translateY(-5px); box-shadow: 0 12px 30px rgba(0,0,0,0.15); }

.widget h2, .widget .widget-title { /* Title inside generic .widget */
    text-align: center; font-family: var(--font-heading-card); font-size: 1.2rem; /* Adjusted */
    margin: 0 0 var(--space-md); /* Adjusted margin */ color: var(--muted-gold-highlight);
    text-shadow: var(--text-shadow-soft); font-weight: normal; letter-spacing: 0.5px;
}
.widget iframe { /* For iframes inside a generic .widget that isn't a .captain-widget */
    width: 100%; flex-grow: 1; min-height: 200px; /* Adjusted from 220px */
    border: none; border-radius: 8px; /* Softer radius for iframe */
    overflow: hidden;
}
.widget > div[id] p strong, .widget > div[id] p[style*="font-size: 1.8em"] { /* From original style.css */
    color: #f9d976;
    font-weight: bold;
}
.widget .warning { /* From original user CSS */
    color: #ff8a80; /* Original color */
    font-weight: bold; font-size: 0.9em;
}


/* --- MEDIA QUERIES - Adapting new styles for responsiveness --- */
/* Using user's existing media query structure and adding/adjusting rules */
@media (max-width: 1200px) {
    /* .widget-grid already responsive with auto-fit, this ensures 2 columns if auto-fit results in more */
    .widget-grid { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
    .benefits-grid { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); } /* For benefits grid */
    .dashboard { grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); } /* For user's other dashboard */
}
@media (min-width: 1400px) { /* From user's original CSS, for .captain-widget */
    .captain-widget { /* Ensuring it applies to .captain-widget specifically */
        width: 360px !important; max-width: 360px !important;
        margin-left: auto !important; margin-right: auto !important; /* Center if grid column is wider */
    }
}
@media (min-width: 769px) and (max-width: 1024px) { /* Tablet */
    #main-scrollable-content-wrapper { padding-top: 80px; } /* Adjust for nav */
    nav { padding: var(--space-sm) var(--space-lg); height: 65px; }
    .nav-logo { height: 35px; margin-left: var(--space-md); }
    .nav-links { gap: var(--space-xs); }
    .nav-link { font-size: 0.85rem; padding: var(--space-xs) var(--space-sm); }
    .home-title { font-size: 2.3rem; } .hero-title { font-size: 2rem; } .hero-subtitle { font-size: 1.1rem; }
    .main-logo { width: 160px; height: 160px; }
    .content-container { padding: var(--space-lg); width: 92%; } .content-container h2 { font-size: 1.8rem; }
    .amenity-card h3 { font-size: 1.3rem; } .amenity-card p { font-size: 0.85rem; }
    /* .benefits-grid already handled by max-width: 1200px */
    .membership-benefits { padding: var(--space-lg); }
    .services-grid.popup-grid { grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); }
    .services-grid { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); } /* Homepage services grid */
     .widget-grid { grid-template-columns: repeat(2, 1fr); } /* For captain widgets on tablet */
}
@media (max-width: 768px) { /* Smaller tablets and large mobiles */
    body { font-size: 15px; } /* Slightly smaller base for small screens */
    #main-scrollable-content-wrapper { padding-top: 70px; }
    nav { padding: var(--space-xs) var(--space-md); height: 60px; flex-wrap: nowrap; } /* Ensure nav items don't wrap */
    .nav-logo { height: 30px; margin-left: var(--space-sm); }
    .social-icon { margin-right: var(--space-sm); }
    .social-icon img.facebook-logo { width: 22px; height: 22px;}
    .mobile-menu-btn {
        display: flex; top: calc(60px / 2 - 14px); right: var(--space-md);
        color: var(--muted-gold-highlight); z-index: 1100; /* Above nav links if they overlap */
        width: 28px; height: 28px; justify-content: center; align-items: center;
        background: transparent; border: none; cursor: pointer; position: fixed; /* Ensure it's fixed */
    }
    .mobile-menu-btn svg { width: 22px; height: 22px; stroke: var(--muted-gold-highlight); stroke-width: 2.5px; }

    .nav-links { /* Mobile menu panel */
        position: fixed; top: 0; left: -100%; width: 100%; height: 100vh;
        background: rgba(10, 47, 81, 0.9); /* Slightly more transparent for effect */
        backdrop-filter: var(--glass-blur-amount); -webkit-backdrop-filter: var(--glass-blur-amount);
        display: flex; flex-direction: column; justify-content: center; align-items: center;
        transition: left 0.35s cubic-bezier(0.4, 0, 0.2, 1); /* Smoother ease */
        z-index: 1050; /* Below menu button */
        padding-top: 60px; gap: var(--space-xs);
    }
    .nav-links.open { left: 0; }
    .nav-links .nav-link { /* Links inside mobile menu */
        font-size: 1.2rem; /* Larger for touch */ font-weight: 500; letter-spacing: 0.8px;
        margin: var(--space-xs) 0; width: 85%; max-width: 300px;
        padding: var(--space-sm) var(--space-md); text-align: center; color: var(--primary-light-text);
        background: rgba(200,181,136,0.08); border: 1px solid var(--glass-border-gold-accent);
        border-radius: 6px;
    }
    .nav-links .nav-link:hover, .nav-links .nav-link.active {
        color: var(--primary-dark-blue); background: var(--muted-gold-highlight); text-shadow: none;
    }
    .nav-link::after { display: none; } /* No underline in mobile menu */

    .home-title { font-size: 2rem; } .hero-title { font-size: 1.8rem; } .hero-subtitle { font-size: 1.1rem; }
    .main-logo { width: 140px; height: 140px; margin: var(--space-lg) auto var(--space-sm); }
    .hero-welcome { max-width: 90%; padding: var(--space-lg) var(--space-sm); }
    .amenities-grid { grid-template-columns: 1fr; gap: var(--space-md); }
    .amenity-card { padding: var(--space-lg); } .amenity-card h3 { font-size: 1.25rem; } .amenity-card p { font-size: 0.8rem; }
    .content-container { padding: var(--space-lg) var(--space-md); width: 95%; max-height: 88vh; }
    .content-container h2 { font-size: 1.7rem; }
    .section-logo { width: 55px; height: 55px; top: calc(var(--space-lg) * -0.5); }
    .benefits-grid { grid-template-columns: 1fr; }
    .membership-benefits .elegant-title { font-size: 1.7rem; }
    .services-grid { grid-template-columns: 1fr; } /* Homepage services grid */
    .service-card { padding: var(--space-lg); } .service-card h3 { font-size: 1.3rem; } /* Popup service card */
    .stat-number { font-size: 1.8rem; } .stat-label { font-size: 0.8rem; }
    .widget-grid { grid-template-columns: 1fr; padding: var(--space-md) var(--space-xs); gap: var(--space-md); } /* Captain widgets */
    .dashboard { grid-template-columns: 1fr; gap: var(--space-md); } /* User's other dashboard */
    .dashboard .widget { padding: 15px; min-height: 260px; } /* User's other dashboard widget */
    .dashboard .widget .widget-title { font-size: 1.3em; }
    .dashboard .widget iframe { min-height: 200px; }
    .captain-widget iframe { min-height: 180px; } /* Adjust captain widget iframe on small screens */
}
@media (max-width: 480px) { /* Smallest Mobile */
    #main-scrollable-content-wrapper { padding-top: 60px; }
    nav { height: 55px; } .mobile-menu-btn { top: calc(55px / 2 - 14px); }
    .home-title { font-size: 1.7rem; } .hero-title { font-size: 1.5rem; } .hero-subtitle { font-size: 1rem; }
    .main-logo { width: 120px; height: 120px; }
    .content-container { padding: var(--space-md); width: 100%; border-radius: 8px; max-height: 90vh;}
    .content-container h2 { font-size: 1.5rem; }
    .content-container p:not(.services-intro):not(.benefits-intro):not(.membership-cta p):not([style*="text-align:center"]) { font-size: 0.85rem; padding: var(--space-sm); }
    .section-logo { width: 50px; height: 50px; top: calc(var(--space-md) * -0.5); }
    .contact-form { padding: 0; } /* Rely on container padding */
    .form-control { padding: var(--space-sm); font-size: 0.85rem; }
    .submit-btn, .book-btn { padding: var(--space-sm) var(--space-lg); font-size: 0.85rem; }
    .premium-button { padding: var(--space-sm) var(--space-lg); font-size: 0.9rem; }
    .captain-widget .widget-title { font-size: 1.1em; } /* Original adjustment for captain widget title from user CSS */
    .dashboard .widget .widget-title { font-size: 1.1em; } /* Consistency for other dashboard titles */
    .dashboard .widget { min-height: 240px; } /* User's other dashboard widget */
}

.mobile-menu-btn { /* Base styles, ensured it's correctly targeted */
    display: none; /* Hidden by default, shown by @media */
}

/* Styles for .dashboard from user's original style.css - distinct from .widget-grid */
.dashboard {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); /* From user's file */
    gap: 25px; /* From user's file */
    padding: 25px; /* From user's file */
    max-width: 1600px; /* From user's file */
    margin: 20px auto; /* From user's file */
}
/* .widget inside this specific .dashboard - styles from user's file */
.dashboard .widget {
    background: var(--glass-bg-base); /* Using theme variable */
    backdrop-filter: var(--glass-blur-amount); /* Using theme variable */
    border: 1px solid var(--glass-border-light); /* Using theme variable */
    border-radius: 12px; /* Match other theme cards */
    color: var(--primary-light-text); /* Using theme variable */
    padding: var(--space-md); /* Using theme variable */
    box-shadow: 0 10px 30px rgba(0,0,0,.1); /* Standard shadow */
    display: flex; flex-direction: column; /* For content alignment */
}
.dashboard .widget .widget-title {
    color: var(--muted-gold-highlight); /* Using theme variable */
    font-family: var(--font-heading-card); /* Using theme variable */
    font-size: 1.3em; /* From user's file */
    text-align: center; /* From user's file */
    margin-bottom: 15px; /* From user's file */
}
/* iframe inside this specific .dashboard .widget */
.dashboard .widget iframe {
    width: 100%; flex-grow: 1; min-height: 220px; /* min-height from user's file */
    border: none; border-radius: 8px; /* Match other iframes */
    overflow: hidden;
}
/* Further styles from user's file for .dashboard .widget */
.dashboard .widget > div[id] { /* From user's file */
    padding:10px; flex-grow:1; display:flex; flex-direction:column;
    justify-content:center; align-items:center; text-align:center;
    font-size:1em; line-height:1.5;
}
.dashboard .widget > div[id] p { color: var(--primary-light-text); opacity: 0.9; } /* Using theme variable */
.dashboard .widget > div[id] p strong, .dashboard .widget > div[id] p[style*="font-size: 1.8em"] { /* From user's file */
    color: #f9d976; /* Original gold for emphasis here */
    font-weight: bold;
}
.dashboard .widget .warning { /* From user's file */
    color: #ff8a80;
    font-weight: bold;
    font-size: 0.9em;
}

/* Responsive adjustments for this .dashboard from user's file */
@media screen and (max-width: 1200px) {
    .dashboard {
        grid-template-columns: repeat(auto-fit, minmax(340px, 1fr)); /* From user's file */
    }
}
@media screen and (max-width: 768px) {
    .dashboard {
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* From user's file */
        gap: 20px; /* From user's file */
    }
    .dashboard .widget { /* Widget inside this specific .dashboard */
        padding: 15px; /* From user's file */
        min-height: 260px; /* From user's file */
    }
    .dashboard .widget .widget-title { /* Title inside this .dashboard .widget */
        font-size: 1.3em; /* From user's file */
    }
    .dashboard .widget iframe { /* iframe inside this .dashboard .widget */
        min-height: 200px; /* From user's file */
    }
}
@media screen and (max-width: 480px) {
    .dashboard {
        grid-template-columns: 1fr; /* From user's file */
        gap: 15px; /* From user's file */
    }
    .dashboard .widget { /* Widget inside this specific .dashboard */
        min-height: 240px; /* From user's file, adjusted from auto */
    }
    .dashboard .widget .widget-title { /* Title inside this .dashboard .widget */
        font-size: 1.2em; /* From user's file */
    }
}
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Phuket Cruising Yacht Club - Elite Marine Experience</title> <link href="[https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Playfair+Display:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600;700&family=Marcellus+SC&family=Sail&display=swap](https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Playfair+Display:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600;700&family=Marcellus+SC&family=Sail&display=swap)" rel="stylesheet" />
    <link rel="stylesheet" href="[https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css](https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css)" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUA6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="logob.png" type="image/png"> <style>
        /* --- CRITICAL INLINE STYLES --- */
        /* Basic Reset & Body Fallback */
        body, html { margin: 0; padding: 0; height: 100%; font-family: 'Montserrat', sans-serif; background: #03080f; /* Darker fallback */ }

        /* Loading Overlay - STRICTLY ORIGINAL COLORS + NEW DOTS - Critical Path */
        #loading-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 9999; background: rgba(0,10,20,0.97); /* Darker, more opaque */ opacity: 1;
            transition: opacity 0.8s ease-out; /* Smoother fade */
        }
        #loading-overlay.fade-out { opacity: 0; pointer-events: none; }
        #loading-overlay::before { /* Original Gold Ripple */
            content: ""; position: absolute; width: 200px; height: 200px;
            background: radial-gradient(circle, rgba(249,217,118,0.08), transparent 65%); /* Subtler ripple */
            border-radius: 50%; animation: rippleInline 2.5s ease-out infinite; pointer-events: none;
        }
        @keyframes rippleInline { 0% { transform: scale(0.8); opacity: 0.5; } 100% { transform: scale(2.8); opacity: 0; } }
        #loading-logo-circle-wrapper { position: relative; width: 200px; height: 200px; margin-bottom: 15px; }
        #loading-logo {
            width: 200px; height: 200px; display: block;
            filter: drop-shadow(0 0 8px #f9d976); /* ORIGINAL GOLD */
            opacity: 0; animation: logoPopInline 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards 0.3s;
            position: relative; z-index: 2; border-radius: 50%;
        }
        @keyframes logoPopInline { from { opacity: 0; transform: scale(0.7); } to { opacity: 1; transform: scale(1); } }
        #loading-circle {
            position: absolute; top: 0; left: 0; width: 200px; height: 200px;
            pointer-events: none; z-index: 1; animation: spinInline 1.6s linear infinite;
            filter: drop-shadow(0 0 8px #f9d976); /* ORIGINAL GOLD */
        }
        #loading-circle svg { width: 200px; height: 200px; transform-origin: center; }
        @keyframes spinInline { 100% { transform: rotate(360deg); } }
        #loading-circle circle.base { stroke: rgba(249,217,118,0.2); stroke-width: 12; fill: none; } /* Original gold tinted base */
        #loading-circle circle.progress { /* Stroke color via SVG gradient */
            stroke-width: 12; fill: none; stroke-linecap: round;
            stroke-dasharray: 283; stroke-dashoffset: 283; transition: stroke-dashoffset 0.25s ease;
        }
        /* NEW Loading Dots - Inline for critical path */
        #loading-dots { display: flex; justify-content: center; align-items: center; margin-top: 10px; }
        #loading-dots .dot {
            width: 9px; height: 9px; margin: 0 4px; background-color: #f9d976; /* ORIGINAL GOLD */
            border-radius: 50%; animation: loadingDotAnimationInline 1.4s infinite ease-in-out;
        }
        #loading-dots .dot:nth-child(1) { animation-delay: -0.32s; }
        #loading-dots .dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes loadingDotAnimationInline {
            0%, 80%, 100% { transform: scale(0.4); opacity: 0.5; }
            40% { transform: scale(1.0); opacity: 1; }
        }
        /* End Loading Screen Critical Styles */

        /* Captain's Dashboard Intro Box - PRESERVED INLINE STYLES FROM ORIGINAL HTML */
        .glass-box { /* Styles from original index.html for this specific box */
            background: rgba(0, 68, 102, 0.7); /* Original: #004466 with alpha */
            -webkit-backdrop-filter: blur(10px); backdrop-filter: blur(10px);
            padding: 25px; border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.18);
            box-shadow: 0 8px 32px 0 rgba(0,0,0,0.37);
            max-width: 600px; margin: 30px auto; text-align: center;
        }
        .captain-header { /* Original Styling Preserved */
            font-family: 'Cormorant Garamond', serif; font-size: 1.5rem; font-weight: bold;
            color: #f9d976; /* Original gold */
            text-shadow: 2px 2px 4px rgba(0,0,0,0.50);
            animation: floatCaptainHeader 3s ease-in-out infinite; /* Unique animation name */
        }
        @keyframes floatCaptainHeader { 0%{transform:translateY(0)} 50%{transform:translateY(-3px)} 100%{transform:translateY(0)} }
        .wave-underline { /* Original Styling Preserved */
            width: 200px; height: 4px; margin: 10px auto 20px;
            background: linear-gradient(90deg, #00aaff, #00ffcc, #00aaff);
            background-size: 300% 100%; animation: waveUnderlineAnim 5s ease-in-out infinite;
            border-radius: 2px;
        }
        @keyframes waveUnderlineAnim { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
        .captain-subtitle { /* Original Styling Preserved */
            font-family: 'Montserrat', sans-serif; font-size: 0.9rem; color: #eee;
            margin-bottom: 15px; font-style: italic;
        }
        .live-pulse { /* Original Styling Preserved */
            display: inline-flex; align-items: center; gap: 8px;
            font-weight: bold; color: #c60000; /* Original red */
        }
        .live-dot { /* Original Styling Preserved */
            width: 12px; height: 12px; background-color: #c60000; border-radius: 50%;
            box-shadow: 0 0 8px rgba(198,0,0,0.7); animation: pulseDotLive 1.2s infinite;
        }
        @keyframes pulseDotLive { 0%{transform:scale(1);opacity:1} 50%{transform:scale(1.4);opacity:.5} 100%{transform:scale(1);opacity:1} }
        /* End Captain's Dashboard Critical Styles */
    </style>
</head>
<body>
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous" src="[https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v22.0](https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v22.0)" nonce="YOUR_NONCE_HERE"></script> <div id="loading-overlay" role="status" aria-live="polite" aria-busy="true"> <div id="loading-logo-circle-wrapper" aria-hidden="true">
            <img id="loading-logo" src="logob.png" alt="Phuket Cruising Yacht Club Emblem" /> <div id="loading-circle" aria-hidden="true">
                <svg viewBox="0 0 100 100" role="img" aria-label="Loading progress indicator"> <defs>
                        <linearGradient id="loading-gradient-original" x1="1" y1="0" x2="0" y2="1">
                            <stop offset="0%" stop-color="#f9d976"/>
                            <stop offset="50%" stop-color="#ffe57f"/>
                            <stop offset="100%" stop-color="#f9d976"/>
                        </linearGradient>
                    </defs>
                    <circle class="base"    cx="50" cy="50" r="45" />
                    <circle class="progress" cx="50" cy="50" r="45" stroke="url(#loading-gradient-original)"/>
                </svg>
            </div>
        </div>
        <div id="loading-dots" aria-hidden="true">
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
        </div>
    </div>

    <div id="threejs-background" aria-hidden="true"></div> <div id="page-content" aria-hidden="true"> <header class="nav-container" role="banner"> <nav aria-label="Main navigation">
                <a href="#home" class="nav-logo-link" aria-label="Phuket Cruising Yacht Club, Homepage"> <img src="logob.png" alt="Phuket Cruising Yacht Club Logo" class="nav-logo">
                </a>
                <div class="nav-links" id="main-nav-links"> <a href="#home" class="nav-link active">Home</a>
                    <a href="#about" class="nav-link">About</a>
                    <a href="#services" class="nav-link">Services</a>
                    <a href="#accommodation" class="nav-link">Stay</a> <a href="#gallery" class="nav-link">Gallery</a>
                    <a href="#contact" class="nav-link">Contact</a>
                </div>
                <a href="[https://www.facebook.com/groups/187918071231247](https://www.facebook.com/groups/187918071231247)" target="_blank" rel="noopener noreferrer" class="social-icon" aria-label="Follow us on Facebook"> <img src="[https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/2021_Facebook_icon.svg/800px-2021_Facebook_icon.svg.png](https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/2021_Facebook_icon.svg/800px-2021_Facebook_icon.svg.png)" alt="Facebook Icon" class="facebook-logo" style="width:30px; height:30px;">
                </a>
            </nav>
        </header>
        <button class="mobile-menu-btn" aria-label="Open navigation menu" aria-expanded="false" aria-controls="main-nav-links"> <svg xmlns="[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <line x1="3" y1="12" x2="21" y2="12"></line> <line x1="3" y1="6" x2="21" y2="6"></line> <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
        </button>

        <main id="main-scrollable-content-wrapper">
            <section class="home-content" id="home" aria-labelledby="main-home-title">
                <img src="logob.png" alt="Phuket Cruising Yacht Club Emblem" class="main-logo">
                <h1 class="home-title" id="main-home-title">Phuket Cruising Yacht Club</h1>
                <div class="particles-container" id="particles-container" aria-hidden="true"></div>
                
                <div class="hero-welcome">
                    <h2 class="hero-title">The Island's Premier Yacht Club</h2>
                    <p class="hero-subtitle">Your Tranquil Haven in the Andaman Sea</p> </div>

                <div class="elfsight-app-b52fbf80-b063-430d-a25d-4b1d31113389" data-elfsight-app-lazy></div>

                <div class="intro-text">
                    <article class="welcome-section" aria-labelledby="welcome-section-title"> <div class="amenities-grid">
                            <div class="amenity-card">
                                <i class="amenity-icon fas fa-anchor" aria-hidden="true"></i>
                                <h3>Stay & Amenities</h3>
                                <p>Discover seamless services: rentals for transport and leisure craft, secure dinghy mooring, open showers, and abundant charging stations for your convenience.</p>
                            </div>
                            <div class="amenity-card">
                                <i class="amenity-icon fas fa-ship" aria-hidden="true"></i>
                                <h3>Port & Maritime Services</h3>
                                <p>As an authorized port-entrance agent and Royal Thai Customs visa extension provider, we ensure smooth sailing for your arrivals, departures, and accreditations.</p>
                            </div>
                            <div class="amenity-card">
                                <i class="amenity-icon fas fa-glass-martini-alt" aria-hidden="true"></i>
                                <h3>Clubhouse & Dining</h3>
                                <p>Our renovated clubhouse and beach decks welcome you from morning till late. Indulge in happy hour, signature cocktails, and diverse international and local brews.</p>
                            </div>
                        </div>
                        <div class="visit-section">
                            <div class="business-details">
                                <div class="detail-item"> <i class="time-icon fas fa-clock" aria-hidden="true"></i> <span>Open Daily: 12 PM - Late</span> </div>
                                <div class="detail-item"> <i class="location-icon fas fa-map-marker-alt" aria-hidden="true"></i> <span>Soi Sukee, Chalong, Phuket, Thailand</span> </div>
                                <div class="announcement"> <i class="new-icon fas fa-star" aria-hidden="true"></i> <span>Taco Tuesday: Live Music, Drinks & T-Shirt Lotto!</span> </div>
                            </div>
                        </div>
                    </article>
                </div>

                <section class="services-showcase" aria-labelledby="showcase-title">
                    <h3 id="showcase-title">World-Class Experiences Await</h3> <div class="services-grid">
                        <div class="service-highlight"> <i class="icon fas fa-beer" aria-hidden="true"></i> <h4>Vibrant Social Hub</h4> <p>Happy Hour (5-7 PM), signature Margaritas & craft beers.</p> </div>
                        <div class="service-highlight"> <i class="icon fas fa-user-graduate" aria-hidden="true"></i> <h4>Expert Instruction</h4> <p>AYS Accredited Sailing School for all skill levels.</p> </div> <div class="service-highlight"> <i class="icon fas fa-concierge-bell" aria-hidden="true"></i> <h4>Marine Concierge</h4> <p>Brokerage, charters, and comprehensive yacht management.</p> </div> <div class="service-highlight"> <i class="icon fas fa-water" aria-hidden="true"></i> <h4>Premier Facilities</h4> <p>Modern docks, quality equipment, and beachfront relaxation.</p> </div>
                    </div>
                </section>

                <section class="membership-benefits" aria-labelledby="membership-title">
                    <h3 class="elegant-title" id="membership-title">Exclusive Member Privileges</h3>
                    <p class="benefits-intro">Join our esteemed community and unlock significant savings and unparalleled access with your PCYC membership.</p>
                    <div class="benefits-grid">
                        <div class="benefit-category">
                            <h4>Partner Discounts</h4>
                            <ul class="benefits-list">
                                <li>15% off: Rolly Tasker (Exclusive Club Promo)</li>
                                <li>20% off: Ratanachai Shipyard (Haul-outs & Hard-stand)</li>
                                <li>20% off: Royal Langkawi Yacht Club (Berths & F&B)</li>
                                <li>Discounts: Major Phuket Chandleries (AME, Tops, Surapol)</li>
                                <li>Up to 20% off: Chao Fa East Auto Parts</li>
                                <li>15% off: Aqua Master Chalong</li>
                            </ul>
                        </div>
                        <div class="benefit-category">
                            <h4>Club Amenities</h4> <ul class="benefits-list">
                                <li>Member rates on all food & beverages</li>
                                <li>Priority access to special events</li>
                                <li>Complimentary high-speed WiFi</li>
                                <li>Premium shower & changing facilities</li>
                                <li>Event space for up to 100 guests (Clubhouse)</li>
                                <li>Exclusive member-only lounge areas</li>
                                <li>Welcome package & club regalia</li>
                            </ul>
                        </div>
                        <div class="benefit-category">
                            <h4>Maritime Support</h4> <ul class="benefits-list">
                                <li>Preferred rates on boat minding</li>
                                <li>Priority booking for marine services</li>
                                <li>Discounted equipment rentals</li>
                                <li>Access to trusted contractor network</li>
                                <li>Monthly maritime e-newsletter</li>
                                <li>Professional marine consultations</li>
                                <li>24/7 emergency assistance line</li>
                            </ul>
                        </div>
                    </div>
                    <div class="membership-cta">
                        <p>Annual Membership: à¸¿3,000 (Includes Photo ID, Club T-Shirt & Sticker)</p>
                        <a href="#contact" class="premium-button">Become a Valued Member</a>
                    </div>
                </section>
            
                <div style="margin: var(--space-xl) auto; text-align: center;">
                    <a href="[https://www.facebook.com/groups/187918071231247](https://www.facebook.com/groups/187918071231247)" target="_blank" rel="noopener noreferrer" class="event-link">
                        <img src="[https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/2021_Facebook_icon.svg/800px-2021_Facebook_icon.svg.png](https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/2021_Facebook_icon.svg/800px-2021_Facebook_icon.svg.png)" alt="Facebook Icon" class="facebook-logo">
                        Events & Community Updates
                    </a>
                </div>
                <div class="fb-page" data-href="[https://www.facebook.com/groups/187918071231247](https://www.facebook.com/groups/187918071231247)" data-tabs="timeline" data-width="360" data-height="400" data-small-header="true" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true" style="margin: var(--space-lg) auto var(--space-xl);"></div>

                <section class="glass-box" aria-labelledby="dashboard-intro-title"> <h3 class="captain-header" id="dashboard-intro-title">- Phuket Maritime Dashboard -</h3> <div class="wave-underline" aria-hidden="true"></div>
                    <p class="captain-subtitle">Live Weather Alerts, Wind, Sea Conditions, Tides, UV Index & Moon Phases</p>
                    <div class="live-pulse" aria-label="Live data indicator"><div class="live-dot" aria-hidden="true"></div>LIVE</div>
                </section>

                <section class="widget-grid" aria-label="Maritime Information Widgets"> <div class="captain-widget"> <h4>ðŸŒ¬ï¸ Wind Forecast (Phuket)</h4> <iframe title="Wind Forecast Widget for Phuket" src="[https://embed.windy.com/embed2.html?lat=7.880&lon=98.389&zoom=9&level=surface&overlay=wind&menu=&message=&marker=&calendar=now&type=map&location=coordinates&metricWind=kt&metricTemp=](https://embed.windy.com/embed2.html?lat=7.880&lon=98.389&zoom=9&level=surface&overlay=wind&menu=&message=&marker=&calendar=now&type=map&location=coordinates&metricWind=kt&metricTemp=)Â°C" frameborder="0" height="250"></iframe> </div>
                    <div class="captain-widget"> <h4>ðŸŒ¤ï¸ Weather Forecast (Phuket)</h4> <iframe title="Weather Forecast Widget for Phuket" src="[https://www.meteoblue.com/en/weather/widget/daily/phuket_thailand_1151254?geoloc=fixed&days=5&tempunit=CELSIUS&windunit=KNOT&layout=image](https://www.meteoblue.com/en/weather/widget/daily/phuket_thailand_1151254?geoloc=fixed&days=5&tempunit=CELSIUS&windunit=KNOT&layout=image)" frameborder="0" scrolling="no" height="250"></iframe> </div>
                    <div class="captain-widget"> <h4>ðŸŒ§ï¸ Weather Radar (Phuket)</h4> <iframe title="Weather Radar Widget for Phuket" src="[https://embed.windy.com/embed2.html?lat=7.888&lon=98.392&zoom=7&overlay=radar&menu=&message=&marker=&calendar=now&type=map&location=coordinates](https://embed.windy.com/embed2.html?lat=7.888&lon=98.392&zoom=7&overlay=radar&menu=&message=&marker=&calendar=now&type=map&location=coordinates)" frameborder="0" style="border:none; overflow:hidden;" allowtransparency="true" height="250"></iframe> </div>
                    <div class="captain-widget"> <h4>ðŸ”† UV Index (Phuket)</h4> <iframe title="UV Index Widget for Phuket" src="[https://embed.windy.com/embed2.html?lat=7.729&lon=98.138&zoom=9&level=surface&overlay=uvindex&menu=&message=true&marker=&calendar=now&type=map&location=coordinates&metricWind=default&metricTemp=default&radarRange=-1](https://embed.windy.com/embed2.html?lat=7.729&lon=98.138&zoom=9&level=surface&overlay=uvindex&menu=&message=true&marker=&calendar=now&type=map&location=coordinates&metricWind=default&metricTemp=default&radarRange=-1)" frameborder="0" scrolling="no" style="border:none; overflow:hidden;" height="300"></iframe> </div>
                    <div class="captain-widget"> <h4>ðŸš¢ Live Ship Tracker</h4> <iframe title="Live AIS Ship Tracker Widget" src="[https://www.marinetraffic.com/en/ais/embed/zoom:10/centery:7.880/centerx:98.389/maptype:1/shownames:false/mmsi:0](https://www.marinetraffic.com/en/ais/embed/zoom:10/centery:7.880/centerx:98.389/maptype:1/shownames:false/mmsi:0)" frameborder="0" height="300"></iframe> </div>
                    <div class="captain-widget"> <h4>ðŸŒ¡ï¸ Sea Surface Temp (Phuket)</h4> <iframe title="Sea Surface Temperature Widget for Phuket" src="[https://embed.windy.com/embed2.html?lat=7.582&lon=98.135&zoom=9&level=surface&overlay=sst&menu=&message=true&marker=&calendar=now&type=map&location=coordinates&metricWind=default&metricTemp=default&radarRange=-1](https://embed.windy.com/embed2.html?lat=7.582&lon=98.135&zoom=9&level=surface&overlay=sst&menu=&message=true&marker=&calendar=now&type=map&location=coordinates&metricWind=default&metricTemp=default&radarRange=-1)" frameborder="0" scrolling="no" style="border:none; overflow:hidden;" height="300"></iframe> </div>
                    <div class="captain-widget"> <h4>ðŸŒŠ Tide Info (Phuket)</h4> <iframe title="Tide Information Widget for Phuket" src="[https://marea.ooo/en/widget/7.8465199/98.3344152?padding=m&components=text%2Cchart&background=transparent&theme=dark](https://marea.ooo/en/widget/7.8465199/98.3344152?padding=m&components=text%2Cchart&background=transparent&theme=dark)" style="background-color: transparent; border: none;" height="300" allow="geolocation"></iframe> </div>
                    <div class="captain-widget"> <h4>â›½ Fuel Docks (Phuket)</h4> <iframe title="Fuel Docks Map near Phuket" src="[https://www.google.com/maps/d/embed?mid=1TleOY4hTm89B9cThLBdIYN_ZXpvgaFg&ehbc=2E312F&noprof=1](https://www.google.com/maps/d/embed?mid=1TleOY4hTm89B9cThLBdIYN_ZXpvgaFg&ehbc=2E312F&noprof=1)" style="border:0;" allowfullscreen loading="lazy" height="300"></iframe> </div> <div class="captain-widget" style="width: 300px; margin: 0 auto;"> <h4>ðŸŒ• Moon Phase</h4> <a target="_blank" rel="noopener noreferrer" style="text-decoration:none;" href="[https://moonphase.guide/](https://moonphase.guide/)" aria-label="View current moon phase on moonphase.guide"> <img src="[https://moonphase.guide/module/MWE5MNnJyNWRtZlJlTTY1Uk9LQ2h0V1gydEVwbkRkS0QrLzBEaDRCeC9TbEhVUklsWVJlWHNEOG9uOGhINXhvc3Jid2FacjA4alVSL1ZlRWxVTzg4ZGc9PQ.png](https://moonphase.guide/module/MWE5MNnJyNWRtZlJlTTY1Uk9LQ2h0V1gydEVwbkRkS0QrLzBEaDRCeC9TbEhVUklsWVJlWHNEOG9uOGhINXhvc3Jid2FacjA4alVSL1ZlRWxVTzg4ZGc9PQ.png)" alt="Current Moon Phase" style="width: 100%; height: auto; max-width:260px; object-fit: contain; display: block; margin: 0 auto;" border="0" /> </a> </div>
                </section>
                <div style="height: var(--space-xl);"></div> </section>


            <div id="about" class="content-section" role="dialog" aria-modal="true" aria-labelledby="about-title">
                <div class="content-container">
                    <button class="close-btn" data-target="about" aria-label="Close About Us section"></button>
                    <img src="logob.png" alt="" class="section-logo" aria-hidden="true">
                    <h2 id="about-title">Our Story & Vision</h2> <p>Welcome to the Phuket Cruising Yacht Club â€“ where maritime passion meets unparalleled hospitality. We are more than just a club; we are a vibrant community, a sanctuary for world cruisers, seasoned expatriates, and sailing enthusiasts alike.</p>
                    <p>Our ethos is simple: to inform, entertain, and provide a distinguished home base in the heart of Phuket. Here, every guest is treated with the same warmth and afforded the same exceptional value as our esteemed members.</p>
                    <p>Indulge in ice-cold refreshments, savor delectable cuisine, and forge lasting connections. The PCYC stands as Phuket's premier full-service yacht club, dedicated to creating memorable experiences on and off the water.</p>
                    <div class="reviews-section" aria-labelledby="member-reviews-title">
                        <h3 id="member-reviews-title">Hear From Our Community</h3>
                        <script src="[https://static.elfsight.com/platform/platform.js](https://static.elfsight.com/platform/platform.js)" async defer></script>
                        <div class="elfsight-app-b52fbf80-b063-430d-a25d-4b1d31113389" data-elfsight-app-lazy></div>
                    </div>
                </div>
            </div>

            <div id="services" class="content-section" role="dialog" aria-modal="true" aria-labelledby="services-title">
                <div class="content-container services-container">
                    <button class="close-btn" data-target="services" aria-label="Close Services section"></button>
                    <img src="logob.png" alt="" class="section-logo" aria-hidden="true">
                    <h2 id="services-title">Comprehensive Marine Services</h2> <p class="services-intro">At PCYC, excellence is our standard. We deliver a complete suite of maritime services with meticulous attention to detail and unwavering expertise, ensuring your every need is met.</p>
                    <div class="services-highlights">
                        <div class="highlight-stat"> <span class="stat-number">24/7</span> <span class="stat-label">Dedicated Support</span> </div>
                        <div class="highlight-stat"> <span class="stat-number">15+</span> <span class="stat-label">Years of Expertise</span> </div>
                        <div class="highlight-stat"> <span class="stat-number">500+</span> <span class="stat-label">Satisfied Seafarers</span> </div> </div>
                    <div class="services-grid popup-grid"> <article class="service-card"> <div class="service-icon" aria-hidden="true">âš“</div> <h3>Port & Immigration</h3> <div class="service-details"> <h4>Thai Customs & Visa</h4><p>Authorized agent for port entrance and Royal Thai Customs yacht visa extensions.</p> <h4>Arrival & Departure</h4><p>Streamlined Immigration processes and customs accreditation for your vessel.</p> <h4>Extended Stays</h4><p>Facilitation of six-month stays with available extension options.</p> </div> </article>
                        <article class="service-card"> <div class="service-icon" aria-hidden="true">ðŸ›¥ï¸</div> <h3>Full-Spectrum Maritime</h3> <div class="service-details"> <h4>Yacht Brokerage</h4><p>Professional brokerage for buying, selling, or upgrading your yacht.</p> <h4>Charter Management</h4><p>Bespoke charter arrangements and comprehensive management.</p> <h4>Salvage & Legal</h4><p>Expert marine salvage, recovery, and specialized maritime legal counsel.</p> </div> </article>
                        <article class="service-card"> <div class="service-icon" aria-hidden="true">ðŸ”§</div> <h3>Equipment & Logistics</h3> <div class="service-details"> <h4>Marine Parts</h4><p>Sourcing for quality new and pre-owned marine equipment.</p> <h4>Vessel Care</h4><p>Diligent boat minding, monitoring, and maintenance programs.</p> <h4>Gear Rentals</h4><p>RIBs, tender outboards, dinghies, and other essential gear available.</p> </div> </article>
                        <article class="service-card"> <div class="service-icon" aria-hidden="true">ðŸ </div> <h3>Shoreline Comforts</h3> <div class="service-details"> <h4>Transport Rentals</h4><p>Convenient car and motorcycle rentals for island exploration.</p> <h4>Beach Bungalows</h4><p>Charming beachfront accommodations for a restful stay.</p> <h4>Dinghy Security</h4><p>Secure, flood-lit dinghy lines directly in front of the clubhouse.</p> </div> </article> <article class="service-card"> <div class="service-icon" aria-hidden="true">â›µ</div> <h3>Training & Development</h3> <div class="service-details"> <h4>AYS Sailing Academy</h4><p>Accredited sailing and powerboat seamanship courses for all levels.</p> <h4>Advanced Maritime</h4><p>Professional development programs and industry certifications.</p> <h4>Practical On-Water</h4><p>Hands-on training with highly experienced, certified instructors.</p> </div> </article>
                        <article class="service-card"> <div class="service-icon" aria-hidden="true">ðŸš¿</div> <h3>Club Facilities</h3> <div class="service-details"> <h4>Refresh & Recharge</h4><p>Immaculate shower facilities open to all members and visitors.</p> <h4>Connectivity Hub</h4><p>Multiple charging stations and high-speed Wi-Fi access.</p> <h4>Trusted Network</h4><p>Access to our curated list of preferred marine service contractors.</p> </div> </article> </div>
                    <div class="service-cta">
                        <p>Connect with Captain Brent for personalized maritime solutions.</p>
                        <a href="#contact" class="premium-button">Inquire About Services</a>
                    </div>
                </div>
            </div>

            <div id="accommodation" class="content-section" role="dialog" aria-modal="true" aria-labelledby="accommodation-title">
                <div class="content-container">
                    <button class="close-btn" data-target="accommodation" aria-label="Close Accommodation section"></button>
                    <img src="logob.png" alt="" class="section-logo" aria-hidden="true">
                    <h2 id="accommodation-title">Beachfront Bungalows</h2>
                    <p style="text-align:center;">Retreat to comfort in our charming beach bungalows, perfectly positioned for sailors and island explorers seeking tranquility by the sea.</p>
                    <div class="accommodation-grid">
                        <article class="bungalow-card"> <img src="images/sailboat-414509_1280.jpg" alt="Serene Standard Bungalow with sea view" class="bungalow-img"> <div class="bungalow-info"> <h3 class="bungalow-title">Standard Bungalow</h3> <p class="bungalow-price">From à¸¿1,500 / night</p> <p class="bungalow-desc">Cozy beachfront comfort with essential amenities, ideal for solo adventurers or couples.</p> <a href="#contact" class="book-btn">Check Availability</a> </div> </article>
                        <article class="bungalow-card"> <img src="images/beautiful-woman-yacht-swimwear.jpg" alt="Spacious Deluxe Bungalow with premium features" class="bungalow-img"> <div class="bungalow-info"> <h3 class="bungalow-title">Deluxe Bungalow</h3> <p class="bungalow-price">From à¸¿2,500 / night</p> <p class="bungalow-desc">Generous space, premium amenities, and stunning ocean vistas for an elevated stay.</p> <a href="#contact" class="book-btn">Check Availability</a> </div> </article>
                        <article class="bungalow-card"> <img src="images/75380478_10156391073797175_4972174924367003648_n.jpg" alt="Large Family Bungalow suitable for groups" class="bungalow-img"> <div class="bungalow-info"> <h3 class="bungalow-title">Family Bungalow</h3> <p class="bungalow-price">From à¸¿3,500 / night</p> <p class="bungalow-desc">Multiple rooms offering ample space for families or groups creating Phuket memories.</p> <a href="#contact" class="book-btn">Check Availability</a> </div> </article>
                    </div>
                </div>
            </div>

            <div id="gallery" class="content-section" role="dialog" aria-modal="true" aria-labelledby="gallery-title">
                <div class="content-container">
                    <button class="close-btn" data-target="gallery" aria-label="Close Gallery section"></button>
                    <img src="logob.png" alt="" class="section-logo" aria-hidden="true">
                    <h2 id="gallery-title">Visual Journey</h2>
                    <p style="text-align:center;">Immerse yourself in the vibrant life and scenic beauty of the Phuket Cruising Yacht Club and its surroundings through our curated gallery.</p>
                    <div id="gallery-container" class="gallery-grid" aria-live="polite"> </div>
                </div>
            </div>

            <div id="contact" class="content-section" role="dialog" aria-modal="true" aria-labelledby="contact-title">
                <div class="content-container">
                    <button class="close-btn" data-target="contact" aria-label="Close Contact Us section"></button>
                    <img src="logob.png" alt="" class="section-logo" aria-hidden="true">
                    <h2 id="contact-title">Get In Touch</h2>
                    <p style="text-align:center;">We welcome your inquiries. Whether you're considering membership, have service questions, or wish to learn more about PCYC, our team is ready to assist.</p>
                    <div class="contact-form">
                        <form id="contact-form" action="YOUR_FORM_SUBMISSION_URL" method="POST"> <div class="form-group"> <label for="name">Full Name</label> <input type="text" id="name" name="name" class="form-control" required autocomplete="name"> </div>
                            <div class="form-group"> <label for="email">Email Address</label> <input type="email" id="email" name="email" class="form-control" required autocomplete="email"> </div>
                            <div class="form-group"> <label for="subject">Subject</label> <input type="text" id="subject" name="subject" class="form-control" required> </div>
                            <div class="form-group"> <label for="message">Your Message</label> <textarea id="message" name="message" class="form-control" rows="5" required></textarea> </div>
                            <button type="submit" class="submit-btn">Send Message</button>
                        </form>
                        <div class="form-success" role="alert">Your message has been sent successfully! We'll be in touch shortly.</div>
                    </div>
                    <p style="text-align:center; margin-top:var(--space-lg);">Or connect with us directly:
                        <a href="[https://www.facebook.com/groups/187918071231247](https://www.facebook.com/groups/187918071231247)" target="_blank" rel="noopener noreferrer" class="event-link" style="display:inline-flex; background:transparent; border:none; padding:0.2rem 0.5rem; color: var(--muted-gold-highlight); vertical-align: middle;">
                            <img src="[https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/2021_Facebook_icon.svg/800px-2021_Facebook_icon.svg.png](https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/2021_Facebook_icon.svg/800px-2021_Facebook_icon.svg.png)" alt="Facebook Icon" class="facebook-logo" style="filter:none; width:20px; height:20px;">
                            Facebook
                        </a>
                    </p>
                </div>
            </div>
        </main>
    </div>

    <script type="module">
        import * as THREE from './js/three.module.js';
        import { OrbitControls } from './js/controls/OrbitControls.js';
        import { Water } from './js/objects/Water.js';
        import { Sky } from './js/objects/Sky.js';

        const overlay = document.getElementById('loading-overlay');
        const prog = document.querySelector('#loading-circle circle.progress');
        const pageContent = document.getElementById('page-content');
        const mainScrollableContentWrapper = document.getElementById('main-scrollable-content-wrapper');
        const navContainer = document.querySelector('.nav-container');
        const homeContent = document.querySelector('.home-content'); // Used for particle positioning
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const navLinksContainer = document.querySelector('.nav-links'); // This is the ul/div holding the links
        let progressVal = 0;

        // Mobile Menu Toggle
        if (mobileMenuBtn && navLinksContainer) {
            mobileMenuBtn.addEventListener('click', () => {
                const isOpen = navLinksContainer.classList.toggle('open');
                mobileMenuBtn.setAttribute('aria-expanded', isOpen.toString());
                mobileMenuBtn.innerHTML = isOpen ?
                    `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><title>Close menu</title><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>` :
                    `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><title>Open menu</title><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>`;
                // Toggle ARIA label on button
                mobileMenuBtn.setAttribute('aria-label', isOpen ? 'Close navigation menu' : 'Open navigation menu');
            });
        }

        const navLinkElements = document.querySelectorAll('.nav-link');
        const contentSections = document.querySelectorAll('.content-section');

        function updateActiveLink(targetId) {
            navLinkElements.forEach(l => l.classList.remove('active'));
            const activeLink = document.querySelector(`.nav-link[href="#${targetId}"]`);
            if (activeLink) activeLink.classList.add('active');
        }
        
        function showSection(targetId) {
            let sectionActivated = false;
            contentSections.forEach(section => {
                const sectionElement = section; // Ensure it's an HTMLElement
                if (sectionElement.id === targetId) {
                    sectionElement.classList.add('active');
                    sectionElement.setAttribute('aria-hidden', 'false');
                    const focusable = sectionElement.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
                    if (focusable) focusable.focus(); // Focus first focusable element
                    sectionActivated = true;
                } else {
                    sectionElement.classList.remove('active');
                    sectionElement.setAttribute('aria-hidden', 'true');
                }
            });

            if (sectionActivated && targetId !== 'home') {
                document.body.classList.add('overlay-active');
            } else {
                document.body.classList.remove('overlay-active');
                if (homeContent) homeContent.classList.remove('hidden-for-overlay'); // Make sure home is visible
            }
            updateActiveLink(targetId);
        }

        navLinkElements.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('href').substring(1);
                if (navLinksContainer && navLinksContainer.classList.contains('open')) { // Close mobile menu
                    navLinksContainer.classList.remove('open');
                    mobileMenuBtn.setAttribute('aria-expanded', 'false');
                    mobileMenuBtn.setAttribute('aria-label', 'Open navigation menu');
                    mobileMenuBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><title>Open menu</title><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>`;
                }
                showSection(targetId);
                if (targetId === 'home' && mainScrollableContentWrapper) {
                    mainScrollableContentWrapper.scrollTo({ top: 0, behavior: 'smooth' });
                }
            });
        });
        
        // JS Error Fix: Correctly declare closeButtons with const
        const closeButtons = document.querySelectorAll('.close-btn');
        closeButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                const targetSectionId = btn.getAttribute('data-target');
                const targetSectionElement = document.getElementById(targetSectionId);
                if (targetSectionElement) {
                     targetSectionElement.classList.remove('active');
                     targetSectionElement.setAttribute('aria-hidden', 'true');
                }
                document.body.classList.remove('overlay-active');
                if (homeContent) homeContent.classList.remove('hidden-for-overlay');
                updateActiveLink('home'); // Default to home active
                 if (mainScrollableContentWrapper) {
                    mainScrollableContentWrapper.scrollTo({ top: 0, behavior: 'smooth' });
                }
            });
        });
        
        // Contact Form (Placeholder for actual submission)
        const contactForm = document.getElementById('contact-form');
        const formSuccess = document.querySelector('.form-success');
        if (contactForm && formSuccess) {
            contactForm.addEventListener('submit', (e) => {
                e.preventDefault(); // Prevent actual submission for now
                // Simulate form submission
                formSuccess.classList.add('visible');
                formSuccess.setAttribute('aria-hidden', 'false');
                contactForm.reset();
                setTimeout(() => {
                    formSuccess.classList.remove('visible');
                    formSuccess.setAttribute('aria-hidden', 'true');
                }, 6000); // Display success for 6 seconds
            });
        }

        // Water Particles (Visual flair, kept from original logic)
        function createWaterParticles() {
            const particlesContainer = document.getElementById('particles-container');
            const titleElement = document.querySelector('.home-title');
            if (!particlesContainer || !titleElement || !homeContent || !mainScrollableContentWrapper) {
                // console.warn("Water particle elements missing.");
                return;
            }
            particlesContainer.innerHTML = ''; // Clear existing
            const titleRect = titleElement.getBoundingClientRect();
            const homeContentRect = homeContent.getBoundingClientRect(); // Ensure homeContent is defined
            for (let i = 0; i < 12; i++) { // Slightly more particles for effect
                const particle = document.createElement('div'); particle.classList.add('water-particle');
                const relativeX = (titleRect.left - homeContentRect.left) + Math.random() * titleRect.width - 10 + (Math.random() * 30 - 15);
                const relativeY = (titleRect.top - homeContentRect.top) + Math.random() * titleRect.height - 5 + (Math.random() * 15 - 7);
                particle.style.left = `${relativeX}px`; particle.style.top = `${relativeY}px`;
                particle.style.animationDelay = `${Math.random() * 3}s`; // Varied delay
                particlesContainer.appendChild(particle);
            }
        }
        
        // Inquiry Button Logic (Prefill contact form subject)
        document.querySelectorAll('.book-btn, .premium-button[href="#contact"], .service-cta .premium-button').forEach(btn => {
            if (btn.getAttribute('href') === '#contact') {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (navLinksContainer && navLinksContainer.classList.contains('open')) { // Close mobile nav
                        navLinksContainer.classList.remove('open'); mobileMenuBtn.setAttribute('aria-expanded', 'false');
                        mobileMenuBtn.setAttribute('aria-label', 'Open navigation menu');
                        mobileMenuBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><title>Open menu</title><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>`;
                    }
                    showSection('contact'); // Show contact popup
                    setTimeout(() => { // Delay to ensure section is visible before focusing
                        const subjectField = document.getElementById('subject');
                        if (subjectField) {
                            let inquirySubject = "General Inquiry"; // Default
                            const bungalowCard = btn.closest('.bungalow-card');
                            const membershipCTA = btn.closest('.membership-cta');
                            const serviceCTA = btn.closest('.service-cta');

                            if (bungalowCard) {
                                const bungalowTitle = bungalowCard.querySelector('.bungalow-title')?.textContent;
                                inquirySubject = bungalowTitle ? `Inquiry: ${bungalowTitle}` : "Bungalow Inquiry";
                            } else if (membershipCTA) { inquirySubject = "Membership Inquiry";
                            } else if (serviceCTA) { inquirySubject = "Service Inquiry"; }
                            
                            subjectField.value = inquirySubject;
                            subjectField.focus(); // Focus subject field
                        }
                    }, 200); // Slightly longer delay for smoother transition
                });
            }
        });

        // ADDED Nav Bar Scroll Effect
        if (mainScrollableContentWrapper && navContainer) {
            mainScrollableContentWrapper.addEventListener('scroll', () => {
                if (mainScrollableContentWrapper.scrollTop > 50) { // Threshold of 50px scrolled
                    navContainer.classList.add('nav-scrolled');
                } else {
                    navContainer.classList.remove('nav-scrolled');
                }
            });
        }

        // Three.js Scene Initialization (WebGL Background)
           function initScene() {
            const threeJsBackground = document.getElementById('threejs-background'); // Get the container
            if (!threeJsBackground) { // Check if container exists
                console.warn("Three.js background container not found. Skipping scene initialization.");
                return;
            }
            const container = document.createElement('div');
            threeJsBackground.appendChild(container); // Append to the background div

            const camera = new THREE.PerspectiveCamera(55, window.innerWidth/window.innerHeight, 1, 20000);
            // REVERTED Camera Position to user's original for sun path
            camera.position.set(30, 30, 100);

            const scene = new THREE.Scene();
            const sun = new THREE.Vector3();

            // Water
            const waterGeom = new THREE.PlaneGeometry(10000, 10000);
            const water = new Water(waterGeom, {
                textureWidth: 512, textureHeight: 512,
                waterNormals: new THREE.TextureLoader().load('textures/waternormals.jpg', tex => {
                    tex.wrapS = tex.wrapT = THREE.RepeatWrapping;
                }),
                sunDirection: new THREE.Vector3(),
                sunColor: 0xffcc66, waterColor: 0x226666, // User's original water color
                distortionScale: 3.7, fog: false // User's original distortion & fog
            });
            water.rotation.x = -Math.PI/2;
            scene.add(water);

            // Sky
            const sky = new Sky();
            sky.scale.setScalar(10000);
            scene.add(sky);
            const uni = sky.material.uniforms;
            uni.turbidity.value = 10; // User's original sky params
            uni.rayleigh.value = 2;
            uni.mieCoefficient.value = 0.005;
            uni.mieDirectionalG.value = 0.8;

            const phi = THREE.MathUtils.degToRad(90), theta = THREE.MathUtils.degToRad(180); // User's original sun position
            sun.setFromSphericalCoords(1, phi, theta);
            uni.sunPosition.value.copy(sun);
            water.material.uniforms.sunDirection.value.copy(sun).normalize();

            // Renderer
            const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true }); // Added alpha for potential blending
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 0.6; // Retained for balanced lighting
            container.appendChild(renderer.domElement);

            // Controls
            const controls = new OrbitControls(camera, renderer.domElement);
            controls.maxPolarAngle = Math.PI*0.495; // User's original
            controls.minDistance = 40; controls.maxDistance = 200; // User's original
            // REVERTED Control Target to user's original for sun path
            controls.target.copy(sun.clone().multiplyScalar(100));
            controls.enableZoom = false; // User's original
            controls.enablePan = false; // Good for fixed scenic view
            controls.autoRotate = true; // Retained for subtle motion
            controls.autoRotateSpeed = 0.12; // Retained for subtle motion
            controls.update();
            

            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth/window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
                // Re-create water particles on resize if home content is visible
                if (homeContent && homeContent.classList.contains('visible') && !document.body.classList.contains('overlay-active')) {
                    createWaterParticles();
                }
            });

            // Animate
            function animate() {
                requestAnimationFrame(animate);
                water.material.uniforms.time.value += 1/60; // User's original water speed
                controls.update(); 
                renderer.render(scene, camera);
            }
            animate();

            // Show navigation and home content after scene is initialized
            setTimeout(() => {
                if (navContainer) navContainer.classList.add('visible');
                if (homeContent && !document.body.classList.contains('overlay-active') && !contentSections.some(s => s.classList.contains('active'))) {
                    // homeContent.classList.add('visible'); // Not strictly needed as it's visible by default unless overlay
                    createWaterParticles(); // Ensure particles are created
                }
            }, 1000); // User's original timeout
        }

        // Loading Simulation & Scene Initialization
        const loadingInterval = setInterval(() => { 
            progressVal = Math.min(100, progressVal + Math.random() * 8 + 4); 
            const circumference = 2 * Math.PI * 45;
            if (prog) prog.style.strokeDashoffset = circumference * (1 - progressVal / 100);
            if (progressVal >= 100) {
                clearInterval(loadingInterval);
                if (overlay) overlay.classList.add('fade-out');
                setTimeout(() => {
                    if (overlay) overlay.remove();
                    initScene(); 
                    if (pageContent) {
                        pageContent.setAttribute('aria-hidden', 'false');
                        pageContent.classList.add('visible');
                    }
                }, 700); 
            }
        }, 180); 

        // Gallery Image Loading
        const galleryContainer = document.getElementById('gallery-container');
        if (galleryContainer) {
            const galleryImages = [ 
                { src: 'images/beautiful-woman-yacht-swimwear.jpg', alt: 'Elegant woman enjoying the sundeck of a luxury yacht in Phuket\'s azure waters.' }, { src: 'images/473599725_10160435212412175_501266893980304214_n.jpg', alt: 'A majestic yacht sailing gracefully across the open sea near Phuket.' }, { src: 'images/148872788_3169037883196094_849598998136454814_n.jpg', alt: 'Members and guests enjoying a social gathering at the Phuket Cruising Yacht Club.' }, { src: 'images/118274592_10157223767507175_1027198816200289080_n.jpg', alt: 'Dynamic shot of a sailboat cutting through the waves during a Phuket regatta.' }, { src: 'images/75380478_10156391073797175_4972174924367003648_n.jpg', alt: 'Aerial view of a pristine white yacht anchored in a secluded Phuket bay.' }, { src: 'images/463398656_7798563456910157_6872878179612088792_n.jpg', alt: 'Deliciously prepared fresh seafood platter served at the Yacht Club restaurant.' }, { src: 'images/468066240_10102904678842276_3997282509366841665_n.jpg', alt: 'Group of smiling yacht club members posing for a photo during an event.' }, { src: 'images/464508298_8693886117336396_5575655286860524176_n.jpg', alt: 'Close-up of a modern sailing yacht with its sails perfectly trimmed.' }, { src: 'images/sailboat-414509_1280.jpg', alt: 'Silhouette of a sailboat against a breathtaking Phuket sunset over the Andaman Sea.' } ];
            galleryImages.forEach(image => {
                const galleryItem = document.createElement('div'); galleryItem.className = 'gallery-item';
                const img = document.createElement('img'); img.src = image.src; img.alt = image.alt; img.loading = 'lazy';
                galleryItem.appendChild(img); galleryContainer.appendChild(galleryItem);
                galleryItem.addEventListener('click', () => {
                    const lightbox = document.createElement('div'); lightbox.className = 'lightbox';
                    const lightboxImg = document.createElement('img'); lightboxImg.src = image.src; lightboxImg.alt = image.alt;
                    lightbox.appendChild(lightboxImg); document.body.appendChild(lightbox);
                    lightbox.addEventListener('click', () => { lightbox.remove(); });
                });
            });
        }
        
        const localTimeElement = document.getElementById('localTime');
        if (localTimeElement) {
             function updateLocalTime() {
                const now = new Date();
                const options = { timeZone: 'Asia/Bangkok', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
                localTimeElement.textContent = `Current Local Time: ${now.toLocaleTimeString('en-GB', options)}`;
            }
            setInterval(updateLocalTime, 1000);
            updateLocalTime(); 
        }

        setInterval(() => {
            document.querySelectorAll('.captain-widget iframe').forEach(iframe => { 
                try { iframe.src = iframe.src; } catch (e) { /* console.warn("Error refreshing iframe:", e); */ }
            });
        }, 15 * 60 * 1000); 
        
        document.addEventListener('DOMContentLoaded', () => {
            updateActiveLink('home');
        });

    </script>
</body>
</html>
